import{c as Y,d as O,e as G,f as q,g as $,h as K,j as z,p as W,q as J,y as X}from"./chunk-CYRR275F.js";import{h as U}from"./chunk-LDRJV2AZ.js";import{a as Q}from"./chunk-MMO3LV47.js";import{B as N,J as L,V as R,jb as P,lb as j,mb as H}from"./chunk-XQKT32VU.js";import{c as E,e as k}from"./chunk-GEE437AJ.js";import{c as V}from"./chunk-CADW372H.js";import"./chunk-EZWRTDAZ.js";import"./chunk-5FFKEXUF.js";import{l as B,p as A,s as w}from"./chunk-OAPWU2O3.js";import{Ac as d,Db as y,Eb as M,Fb as b,Gb as l,Hb as s,Ib as I,Pb as g,Ub as _,Wa as t,Wb as u,_ as v,da as m,ea as S,ec as C,gc as T,ic as a,jc as x,kb as D,kc as p,lc as F,pb as h,zc as o}from"./chunk-565OUHKP.js";var Z=(r,n)=>n._id;function ie(r,n){if(r&1){let e=g();l(0,"div",5)(1,"h3",8),a(2),s(),l(3,"div",9)(4,"div",10)(5,"span",11),a(6),o(7,"translate"),s(),a(8),o(9,"date"),s(),l(10,"button",12),_("click",function(){let c=m(e).$implicit,f=u();return S(f.openSubmitModal(c))}),a(11),o(12,"translate"),s()()()}if(r&2){let e=n.$implicit;t(2),x(e.challengeId==null?null:e.challengeId.title),t(4),p("",d(7,4,"DASHBOARD.MY_SUBMISSIONS.DEADLINE"),":"),t(2),p(" ",d(9,6,e.deadline)," "),t(3),p(" ",d(12,8,"DASHBOARD.MY_SUBMISSIONS.SUBMIT_SOLUTION")," ")}}function te(r,n){r&1&&(l(0,"div",6),a(1),o(2,"translate"),s()),r&2&&(t(),p(" ",d(2,1,"DASHBOARD.MY_SUBMISSIONS.NO_PROGRESS")," "))}function ne(r,n){if(r&1){let e=g();l(0,"div",5)(1,"div",13)(2,"h3",14),a(3),s(),l(4,"div",15),a(5),o(6,"translate"),s()(),l(7,"button",16),_("click",function(){let c=m(e).$implicit,f=u();return S(f.viewSubmissionDetails(c._id))}),a(8),o(9,"translate"),s()()}if(r&2){let e=n.$implicit;t(3),x(e.challengeId==null?null:e.challengeId.title),t(2),F(" ",d(6,4,"DASHBOARD.PORTFOLIO.SCORE"),": ",e.aiScore," "),t(3),p(" ",d(9,6,"DASHBOARD.MY_SUBMISSIONS.VIEW_RESULT")," ")}}function le(r,n){if(r&1){let e=g();l(0,"div",27)(1,"button",28),_("click",function(){m(e);let c=u(2);return S(c.activeTab="file")}),a(2),o(3,"translate"),s(),l(4,"button",28),_("click",function(){m(e);let c=u(2);return S(c.activeTab="link")}),a(5),o(6,"translate"),s()()}if(r&2){let e=u(2);t(),T("bg-white",e.activeTab==="file")("shadow-sm",e.activeTab==="file"),t(),p(" ",d(3,10,"DASHBOARD.MY_SUBMISSIONS.MODAL.UPLOAD_FILE")," "),t(2),T("bg-white",e.activeTab==="link")("shadow-sm",e.activeTab==="link"),t(),p(" ",d(6,12,"DASHBOARD.MY_SUBMISSIONS.MODAL.SUBMIT_LINK")," ")}}function se(r,n){if(r&1){let e=g();l(0,"div")(1,"label",29),a(2),o(3,"translate"),s(),l(4,"div",30)(5,"input",31,0),_("change",function(c){m(e);let f=u(2);return S(f.onFileSelected(c,"project"))}),s(),l(7,"div",32),_("click",function(){m(e);let c=C(6);return S(c.click())}),I(8,"lucide-icon",33),l(9,"span",34),a(10),o(11,"translate"),s()()()()}if(r&2){let e=u(2);t(2),x(d(3,3,"DASHBOARD.MY_SUBMISSIONS.MODAL.PROJECT_FILE")),t(6),b("img",e.icons.FileUp),t(2),p(" ",e.selectedProjectFile?e.selectedProjectFile.name:d(11,5,"DASHBOARD.MY_SUBMISSIONS.MODAL.CLICK_SELECT")," ")}}function re(r,n){r&1&&(l(0,"div")(1,"label",29),a(2),o(3,"translate"),s(),I(4,"input",35),s()),r&2&&(t(2),x(d(3,1,"DASHBOARD.MY_SUBMISSIONS.MODAL.GITHUB_LINK")))}function ae(r,n){if(r&1){let e=g();l(0,"div")(1,"label",29),a(2),o(3,"translate"),s(),l(4,"div",30)(5,"input",36,1),_("change",function(c){m(e);let f=u(2);return S(f.onFileSelected(c,"video"))}),s(),l(7,"div",32),_("click",function(){m(e);let c=C(6);return S(c.click())}),I(8,"lucide-icon",33),l(9,"span",34),a(10),o(11,"translate"),s()()()()}if(r&2){let e=u(2);t(2),x(d(3,3,"DASHBOARD.MY_SUBMISSIONS.MODAL.VIDEO_DEMO")),t(6),b("img",e.icons.FileUp),t(2),p(" ",e.selectedVideoFile?e.selectedVideoFile.name:d(11,5,"DASHBOARD.MY_SUBMISSIONS.MODAL.CLICK_SELECT_VIDEO")," ")}}function oe(r,n){if(r&1){let e=g();l(0,"div",17)(1,"div",18)(2,"h2",19),a(3),o(4,"translate"),s(),l(5,"p",20),a(6),o(7,"translate"),s(),h(8,le,7,14,"div",21),l(9,"form",22),_("ngSubmit",function(){m(e);let c=u();return S(c.onFinalSubmit())}),h(10,se,12,7,"div",23)(11,re,5,3,"div",23)(12,ae,12,7,"div",23),l(13,"div",24)(14,"button",25),_("click",function(){m(e);let c=u();return S(c.showModal=!1)}),a(15),o(16,"translate"),s(),l(17,"button",26),a(18),o(19,"translate"),s()()()()()}if(r&2){let e,i=u();t(3),p(" ",d(4,10,"DASHBOARD.MY_SUBMISSIONS.MODAL.TITLE")," "),t(3),p(" ",d(7,12,"DASHBOARD.MY_SUBMISSIONS.MODAL.SUBTITLE")," "),t(2),b("ngIf",(i.selectedChallenge==null?null:i.selectedChallenge.submissionType)!=="file"&&(i.selectedChallenge==null?null:i.selectedChallenge.submissionType)!=="link"),t(),b("formGroup",i.submitForm),t(),b("ngIf",i.activeTab==="file"||(i.selectedChallenge==null?null:i.selectedChallenge.submissionType)==="file"),t(),b("ngIf",i.activeTab==="link"||(i.selectedChallenge==null?null:i.selectedChallenge.submissionType)==="link"),t(),b("ngIf",i.selectedChallenge==null||i.selectedChallenge.aiConfig==null?null:i.selectedChallenge.aiConfig.requireVideoTranscript),t(3),p(" ",d(16,14,"DASHBOARD.MY_SUBMISSIONS.MODAL.CANCEL")," "),t(2),b("disabled",i.activeTab==="file"&&!i.selectedProjectFile||i.activeTab==="link"&&((e=i.submitForm.get("solutionUrl"))==null?null:e.invalid)||(i.selectedChallenge==null||i.selectedChallenge.aiConfig==null?null:i.selectedChallenge.aiConfig.requireVideoTranscript)&&!i.selectedVideoFile),t(),p(" ",d(19,16,"DASHBOARD.MY_SUBMISSIONS.MODAL.SUBMIT_NOW")," ")}}var ee=class r{constructor(){this.candidateService=v(Q);this.toast=v(U);this.router=v(V);this.icons={Clock:L,CheckCircle:N,FileUp:R,X:P};this.inProgressChallenges=[];this.completedChallenges=[];this.showModal=!1;this.activeTab="file";this.selectedProjectFile=null;this.selectedVideoFile=null;this.selectedSubmissionId="";this.selectedChallenge=null;this.submitForm=new $({solutionUrl:new K("")})}ngOnInit(){this.loadSubmissions()}loadSubmissions(){this.candidateService.getMySubmissions().subscribe({next:n=>{let e=n.data||[];this.inProgressChallenges=e.startedChallenges,this.completedChallenges=e.activeSubmissions},error:()=>this.toast.error("Failed to load submissions")})}openSubmitModal(n){this.selectedSubmissionId=n._id,this.selectedChallenge=n.challengeId,this.showModal=!0,this.submitForm.reset(),this.selectedProjectFile=null,this.selectedVideoFile=null,this.submitForm.get("solutionUrl")?.clearValidators(),this.submitForm.get("solutionUrl")?.updateValueAndValidity(),console.log("this.selectedChallenge",this.selectedChallenge),console.log("Requires Video Transcript:",this.selectedChallenge?.aiConfig?.requireVideoTranscript),this.selectedChallenge?.submissionType==="file"?this.activeTab="file":this.selectedChallenge?.submissionType==="link"?(this.activeTab="link",this.submitForm.get("solutionUrl")?.setValidators([O.required,O.pattern("https?://.+")]),this.submitForm.get("solutionUrl")?.updateValueAndValidity()):this.activeTab="file"}onFileSelected(n,e){let i=n.target.files[0];i&&(e==="project"?this.selectedProjectFile=i:e==="video"&&(this.selectedVideoFile=i))}onFinalSubmit(){if(this.activeTab==="file"&&!this.selectedProjectFile){this.toast.error("Please upload your project file.");return}if(this.activeTab==="link"&&this.submitForm.get("solutionUrl")?.invalid){this.toast.error("Please provide a valid solution URL.");return}if(this.selectedChallenge?.aiConfig?.requireVideoTranscript&&!this.selectedVideoFile){this.toast.error("Please upload your video explanation file.");return}let n=new FormData;n.append("submissionId",this.selectedSubmissionId),n.append("submissionType",this.activeTab),this.activeTab==="file"?this.selectedProjectFile&&n.append("file",this.selectedProjectFile):this.activeTab==="link"&&n.append("linkUrl",this.submitForm.value.solutionUrl||""),this.selectedChallenge?.aiConfig?.requireVideoTranscript&&this.selectedVideoFile&&n.append("videoExplanationFile",this.selectedVideoFile),this.candidateService.submitFinalSolution(n).subscribe({next:()=>{this.toast.success("Solution submitted successfully!"),this.showModal=!1,this.loadSubmissions()},error:e=>this.toast.error(e.error?.message||"Submission failed")})}viewSubmissionDetails(n){this.router.navigate(["/dashboard/candidate/submission-details",n])}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275cmp=D({type:r,selectors:[["app-my-submissions"]],decls:17,vars:8,consts:[["projectFileInput",""],["videoFileInput",""],[1,"space-y-10","p-6"],[1,"text-2xl","font-bold","mb-6","text-gray-800"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"bg-white","border-2","border-gray-100","rounded-2xl","p-6","shadow-sm"],[1,"p-8","text-center","bg-gray-50","rounded-2xl","border","border-dashed","text-gray-400"],["class","fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",4,"ngIf"],[1,"text-lg","font-bold","text-gray-900"],[1,"mt-4","flex","items-center","justify-between"],[1,"text-sm","text-gray-500"],[1,"block","font-semibold","text-dark-900"],[1,"bg-gray-800","text-white","px-4","py-2","rounded-lg","text-sm","font-bold","cursor-pointer","transition-all",3,"click"],[1,"flex","justify-between","items-start"],[1,"text-lg","font-bold","text-gray-700"],[1,"bg-gray-700","text-white","px-3","py-1","rounded-full","text-xs","font-bold"],[1,"mt-4","font-semibold","text-dark-900","text-sm","hover:underline","cursor-pointer",3,"click"],[1,"fixed","inset-0","bg-black/60","backdrop-blur-sm","flex","items-center","justify-center","z-50","p-4"],[1,"bg-white","rounded-3xl","p-8","w-full","max-w-md","shadow-2xl","transition-all"],[1,"text-2xl","font-bold","mb-2"],[1,"text-gray-500","text-sm","mb-6"],["class","flex bg-gray-100 p-1 rounded-xl mb-6",4,"ngIf"],[1,"space-y-4",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"flex","gap-3","pt-4"],["type","button",1,"flex-1","py-3","font-bold","text-gray-600","hover:bg-gray-100","rounded-xl","transition-all","cursor-pointer",3,"click"],["type","submit",1,"flex-1","py-3","bg-gray-900","text-white","font-bold","rounded-xl","hover:bg-black","disabled:opacity-50","transition-all","cursor-pointer",3,"disabled"],[1,"flex","bg-gray-100","p-1","rounded-xl","mb-6"],[1,"flex-1","py-2","text-xs","font-bold","rounded-lg","transition-all","cursor-pointer",3,"click"],[1,"block","text-sm","font-bold","text-gray-700","mb-1"],[1,"relative","group"],["type","file",1,"hidden",3,"change"],[1,"border-2","border-dashed","border-gray-200","rounded-xl","p-6","flex","flex-col","items-center","justify-center","gap-2","hover:border-blue-400","hover:bg-blue-50/50","transition-all","cursor-pointer",3,"click"],[1,"text-gray-400",3,"img"],[1,"text-xs","font-bold","text-gray-500"],["formControlName","solutionUrl","type","url","placeholder","https://github.com/...",1,"w-full","border-gray-200","rounded-xl","p-3","bg-gray-50","focus:ring-2","focus:ring-blue-500","outline-none"],["type","file","accept","video/mp4, video/webm, video/ogg",1,"hidden",3,"change"]],template:function(e,i){e&1&&(l(0,"div",2)(1,"section")(2,"h2",3),a(3),o(4,"translate"),s(),l(5,"div",4),y(6,ie,13,10,"div",5,Z,!1,te,3,3,"div",6),s()(),l(9,"section")(10,"h2",3),a(11),o(12,"translate"),s(),l(13,"div",4),y(14,ne,10,8,"div",5,Z),s()(),h(16,oe,20,18,"div",7),s()),e&2&&(t(3),p(" ",d(4,4,"DASHBOARD.MY_SUBMISSIONS.IN_PROGRESS")," "),t(3),M(i.inProgressChallenges),t(5),p(" ",d(12,6,"DASHBOARD.MY_SUBMISSIONS.COMPLETED")," "),t(3),M(i.completedChallenges),t(2),b("ngIf",i.showModal))},dependencies:[w,B,X,z,Y,G,q,J,W,H,j,k,A,E],encapsulation:2})}};export{ee as MySubmissions};
