import{a as $}from"./chunk-SX7D23K2.js";import{O as G,a as Y,db as V,ib as j,lb as F,mb as k,s as P}from"./chunk-XQKT32VU.js";import{c as H,e as w,f as U}from"./chunk-GEE437AJ.js";import{b as _}from"./chunk-5FFKEXUF.js";import{j as M,r as L,s as R}from"./chunk-OAPWU2O3.js";import{Ab as E,Ac as r,Cb as N,Db as T,Eb as B,Fb as A,Gb as t,Hb as e,Ib as s,Ic as O,V as D,Wa as i,Wb as C,_ as S,ic as n,jc as c,kb as f,kc as p,mc as b,pa as x,t as I,uc as h,zb as y,zc as a}from"./chunk-565OUHKP.js";var v=class d{constructor(){this.http=S(_);this.apiUrl=`${U.apiUrl}/stats`}getPlatformAnalytics(){return this.http.get(`${this.apiUrl}/platform-analytics`).pipe(I(l=>l.data))}static{this.\u0275fac=function(o){return new(o||d)}}static{this.\u0275prov=D({token:d,factory:d.\u0275fac,providedIn:"root"})}};var z=()=>[1,2,3,4];function J(d,l){d&1&&s(0,"div",4)}function K(d,l){d&1&&(t(0,"div",3),T(1,J,1,0,"div",4,N),e()),d&2&&(i(),B(h(0,z)))}function Q(d,l){if(d&1&&(t(0,"div",5)(1,"ui-card",6)(2,"div",7),s(3,"lucide-icon",8),n(4),a(5,"translate"),e(),t(6,"div",9),n(7),e(),t(8,"div",10),n(9),a(10,"translate"),e()(),t(11,"ui-card",6)(12,"div",7),s(13,"lucide-icon",8),n(14),a(15,"translate"),e(),t(16,"div",9),n(17),e(),t(18,"div",11),n(19),a(20,"translate"),e()(),t(21,"ui-card",6)(22,"div",7),s(23,"lucide-icon",8),n(24),a(25,"translate"),e(),t(26,"div",9),n(27),a(28,"currency"),e(),t(29,"div",11),n(30),a(31,"translate"),e()(),t(32,"ui-card",6)(33,"div",7),s(34,"lucide-icon",8),n(35),a(36,"translate"),e(),t(37,"div",9),n(38,"--%"),e(),t(39,"div",11),n(40),a(41,"translate"),e()()(),t(42,"div",12)(43,"ui-card",6)(44,"h3",13),n(45),a(46,"translate"),e(),t(47,"div",14)(48,"div")(49,"div",15)(50,"span",16),n(51),a(52,"translate"),e(),t(53,"span",17),n(54,"60%"),e()(),t(55,"div",18),s(56,"div",19),e()(),t(57,"div")(58,"div",15)(59,"span",16),n(60),a(61,"translate"),e(),t(62,"span",17),n(63,"30%"),e()(),t(64,"div",18),s(65,"div",20),e()(),t(66,"div")(67,"div",15)(68,"span",16),n(69),a(70,"translate"),e(),t(71,"span",17),n(72,"10%"),e()(),t(73,"div",18),s(74,"div",21),e()()()(),t(75,"ui-card",6)(76,"h3",13),n(77),a(78,"translate"),e(),t(79,"div",22)(80,"div",23)(81,"span",24),n(82),a(83,"translate"),e(),t(84,"span",25),n(85,"24 min"),e()(),t(86,"div",23)(87,"span",24),n(88),a(89,"translate"),e(),t(90,"span",25),n(91,"4.2"),e()(),t(92,"div",23)(93,"span",24),n(94),a(95,"translate"),e(),t(96,"span",26),n(97,"85%"),e()()()()()),d&2){let o,u,g,m=C();i(3),A("img",m.icons.Users),i(),p(" ",r(5,26,"DASHBOARD.ADMIN.ANALYTICS.USER_GROWTH")," "),i(3),p(" ",((o=m.data())==null||o.userGrowth==null?null:o.userGrowth.last30Days)||0," "),i(),A("ngClass",m.userGrowthPct()>=0?"text-green-600":"text-red-600"),i(),b(" ",m.userGrowthPct()>0?"+":"","",m.userGrowthPct(),"% ",r(10,28,"DASHBOARD.ADMIN.ANALYTICS.VS_LAST_MONTH")," "),i(4),A("img",m.icons.Activity),i(),p(" ",r(15,30,"DASHBOARD.ADMIN.ANALYTICS.ACTIVE_USERS")," "),i(3),p(" ",((u=m.data())==null?null:u.engagementLast7Days)||0," "),i(2),p(" ",r(20,32,"DASHBOARD.ADMIN.ANALYTICS.ACTIVE_SUBTITLE")," "),i(4),A("img",m.icons.DollarSign),i(),p(" ",r(25,34,"DASHBOARD.ADMIN.ANALYTICS.REVENUE")," "),i(3),p(" ",r(28,36,(g=m.data())==null?null:g.revenue)," "),i(3),p(" ",r(31,38,"DASHBOARD.ADMIN.ANALYTICS.REVENUE_SUBTITLE")," "),i(4),A("img",m.icons.BarChart3),i(),p(" ",r(36,40,"DASHBOARD.ADMIN.ANALYTICS.CONVERSION")," "),i(5),p(" ",r(41,42,"DASHBOARD.ADMIN.ANALYTICS.NO_DATA")," "),i(5),p(" ",r(46,44,"DASHBOARD.ADMIN.ANALYTICS.REVENUE_DISTRIBUTION")," "),i(6),c(r(52,46,"DASHBOARD.ADMIN.ANALYTICS.COMPANY_CHALLENGES")),i(9),c(r(61,48,"DASHBOARD.ADMIN.ANALYTICS.PREMIUM_FEATURES")),i(9),c(r(70,50,"DASHBOARD.ADMIN.ANALYTICS.COMMISSIONS")),i(8),p(" ",r(78,52,"DASHBOARD.ADMIN.ANALYTICS.PLATFORM_HEALTH")," "),i(5),c(r(83,54,"DASHBOARD.ADMIN.ANALYTICS.AVG_SESSION")),i(6),c(r(89,56,"DASHBOARD.ADMIN.ANALYTICS.CHALLENGES_PER_USER")),i(6),c(r(95,58,"DASHBOARD.ADMIN.ANALYTICS.RETENTION"))}}var W=class d{constructor(){this.analyticsService=S(v);this.data=x(null);this.loading=x(!0);this.icons={TrendingUp:V,Users:j,DollarSign:G,Activity:Y,BarChart3:P};this.userGrowthPct=O(()=>{let l=this.data();if(!l||l.userGrowth.previous30Days===0)return 0;let o=l.userGrowth.last30Days-l.userGrowth.previous30Days;return Math.round(o/l.userGrowth.previous30Days*100)})}ngOnInit(){this.analyticsService.getPlatformAnalytics().subscribe({next:l=>{this.data.set(l),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static{this.\u0275fac=function(o){return new(o||d)}}static{this.\u0275cmp=f({type:d,selectors:[["app-admin-analytics"]],decls:10,vars:7,consts:[[1,"space-y-8","animate-in","fade-in","slide-in-from-bottom-4","duration-500"],[1,"text-2xl","font-bold","mb-2","text-gray-900"],[1,"text-gray-600"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],[1,"h-32","bg-gray-100","rounded-2xl","animate-pulse"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"border-gray-200"],[1,"text-sm","text-gray-600","mb-2","flex","items-center","gap-2"],[1,"w-4","h-4",3,"img"],[1,"text-3xl","font-bold","mb-1","text-gray-900"],[1,"text-xs","font-medium",3,"ngClass"],[1,"text-xs","text-gray-500"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"text-lg","font-bold","mb-6","text-gray-900"],[1,"space-y-5"],[1,"flex","items-center","justify-between","mb-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-sm","font-bold","text-gray-900"],[1,"h-2","bg-gray-100","rounded-full","overflow-hidden"],[1,"h-full","bg-primary-gradient","w-[60%]","rounded-full"],[1,"h-full","bg-primary-gradient","w-[30%]","rounded-full"],[1,"h-full","bg-primary-gradient","w-[10%]","rounded-full"],[1,"space-y-4"],[1,"p-4","bg-gray-50","rounded-xl","border","border-gray-100","flex","justify-between","items-center"],[1,"text-sm","text-gray-600"],[1,"font-bold","text-gray-900"],[1,"font-bold","text-green-600"]],template:function(o,u){o&1&&(t(0,"div",0)(1,"div")(2,"h2",1),n(3),a(4,"translate"),e(),t(5,"p",2),n(6),a(7,"translate"),e()(),y(8,K,3,1,"div",3)(9,Q,98,60),e()),o&2&&(i(3),p(" ",r(4,3,"DASHBOARD.ADMIN.ANALYTICS.TITLE")," "),i(3),c(r(7,5,"DASHBOARD.ADMIN.ANALYTICS.SUBTITLE")),i(2),E(u.loading()?8:9))},dependencies:[R,M,k,F,$,w,L,H],encapsulation:2})}};export{W as Analytics};
