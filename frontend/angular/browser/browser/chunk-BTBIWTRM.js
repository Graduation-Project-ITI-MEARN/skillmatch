import{a as gt,b as U}from"./chunk-YGBCOKBM.js";import{a as mt,b as ft,d as V}from"./chunk-2YIDOPGG.js";import{k as I,l as lt,m as st,n as h,o as E,s as ct,u as dt,y as pt,z as P}from"./chunk-2DHYFB3B.js";import{w as g}from"./chunk-OAPWU2O3.js";import{A as S,Ab as s,C as L,Ca as D,Fb as C,Gb as d,Hb as p,Ib as u,Ic as at,Lc as Z,Nc as rt,Pb as k,Q as R,Ra as K,Ub as O,V as F,W as N,Wa as a,Wb as r,Y as B,_ as f,ab as Q,cc as et,d as M,da as z,dc as nt,e as j,ea as x,fc as ot,ha as b,hc as it,ic as T,j as A,kb as q,kc as y,la as H,lb as G,ob as J,pb as X,ta as $,xb as Y,ya as W,yb as tt,zb as l}from"./chunk-565OUHKP.js";var m=class{constructor(n,t,i,o){this.overlayRef=n;this.config=t;this.containerInstance=i;this.platformId=o;this.destroy$=new A;this.isClosing=!1;this.componentInstance=null;this.containerInstance.cancelTriggered.subscribe(()=>this.trigger("cancel")),this.containerInstance.okTriggered.subscribe(()=>this.trigger("ok")),(this.config.zMaskClosable??!0)&&g(this.platformId)&&this.overlayRef.outsidePointerEvents().pipe(R(this.destroy$)).subscribe(()=>this.close()),g(this.platformId)&&S(document,"keydown").pipe(L(c=>c.key==="Escape"),R(this.destroy$)).subscribe(()=>this.close())}close(n){this.isClosing||(this.isClosing=!0,this.result=n,g(this.platformId)&&this.containerInstance.getNativeElement().classList.add("dialog-leave"),setTimeout(()=>{this.overlayRef&&(this.overlayRef.hasAttached()&&this.overlayRef.detachBackdrop(),this.overlayRef.dispose()),this.destroy$.closed||(this.destroy$.next(),this.destroy$.complete())},150))}trigger(n){let t={ok:this.config.zOnOk,cancel:this.config.zOnCancel}[n];if(t instanceof H)t.emit(this.getContentComponent());else if(typeof t=="function"){let i=t(this.getContentComponent());this.closeWithResult(i)}else this.close()}getContentComponent(){return this.componentInstance}closeWithResult(n){n!==!1&&this.close(n)}};m=M([j(3,$(D))],m);var _t=new B("Z_MODAL_DATA"),w=class e{constructor(){this.overlay=f(pt);this.injector=f(b);this.platformId=f(D)}create(n){return this.open(n.zContent,n)}open(n,t){let i=this.createOverlay();if(!i)return new m(void 0,t,void 0,this.platformId);let o=this.attachDialogContainer(i,t),c=this.attachDialogContent(n,o,i,t);return o.dialogRef=c,c}createOverlay(){if(g(this.platformId)){let n=new ct({hasBackdrop:!0,positionStrategy:this.overlay.position().global()});return this.overlay.create(n)}}attachDialogContainer(n,t){let i=b.create({parent:this.injector,providers:[{provide:dt,useValue:n},{provide:_,useValue:t}]}),o=new I(v,t.zViewContainerRef,i);return n.attach(o).instance}attachDialogContent(n,t,i,o){let c=new m(i,o,t,this.platformId);if(n instanceof Q)t.attachTemplatePortal(new lt(n,null,{dialogRef:c}));else if(typeof n!="string"){let Tt=this.createInjector(c,o),yt=t.attachComponentPortal(new I(n,o.zViewContainerRef,Tt));c.componentInstance=yt.instance}return c}createInjector(n,t){return b.create({parent:this.injector,providers:[{provide:m,useValue:n},{provide:_t,useValue:t.zData}]})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"})}};var Ct=mt("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white p-6 shadow-lg rounded-lg max-w-[calc(100%-2rem)] sm:max-w-[425px]");function vt(e,n){if(e&1){let t=k();d(0,"button",6),O("click",function(){z(t);let o=r();return x(o.onCloseClick())}),u(1,"z-icon",7),p()}}function zt(e,n){if(e&1&&(d(0,"p",9),T(1),p()),e&2){let t=r(3);a(),y(" ",t.config.zDescription," ")}}function xt(e,n){if(e&1&&(d(0,"h4",8),T(1),p(),l(2,zt,2,1,"p",9)),e&2){let t=r(2);a(),y(" ",t.config.zTitle," "),a(),s(t.config.zDescription?2:-1)}}function bt(e,n){if(e&1&&(d(0,"header",1),l(1,xt,3,2),p()),e&2){let t=r();a(),s(t.config.zTitle?1:-1)}}function Dt(e,n){}function kt(e,n){if(e&1&&u(0,"div",4),e&2){let t=r();C("innerHTML",t.config.zContent,K)}}function Ot(e,n){if(e&1&&u(0,"z-icon",13),e&2){let t=r(3);C("zType",t.config.zCancelIcon)}}function wt(e,n){if(e&1){let t=k();d(0,"button",12),O("click",function(){z(t);let o=r(2);return x(o.onCloseClick())}),l(1,Ot,1,1,"z-icon",13),T(2),p()}if(e&2){let t=r(2);a(),s(t.config.zCancelIcon?1:-1),a(),y(" ",t.config.zCancelText??"Cancel"," ")}}function Rt(e,n){if(e&1&&u(0,"z-icon",13),e&2){let t=r(3);C("zType",t.config.zOkIcon)}}function Zt(e,n){if(e&1){let t=k();d(0,"button",14),O("click",function(){z(t);let o=r(2);return x(o.onOkClick())}),l(1,Rt,1,1,"z-icon",13),T(2),p()}if(e&2){let t=r(2);C("zType",t.config.zOkDestructive?"destructive":"default")("disabled",t.config.zOkDisabled),a(),s(t.config.zOkIcon?1:-1),a(),y(" ",t.config.zOkText??"OK"," ")}}function It(e,n){if(e&1&&(d(0,"footer",5),l(1,wt,3,2,"button",10),l(2,Zt,3,4,"button",11),p()),e&2){let t=r();a(),s(t.config.zCancelText!==null?1:-1),a(),s(t.config.zOkText!==null?2:-1)}}var _=class{constructor(){this.zOnCancel=V;this.zOnOk=V}},v=class e extends st{constructor(){super();this.host=f(W);this.config=f(_);this.classes=at(()=>ft(Ct(),this.config.zCustomClasses));this.isStringContent=typeof this.config.zContent=="string";this.portalOutlet=rt.required(h);this.okTriggered=Z();this.cancelTriggered=Z()}getNativeElement(){return this.host.nativeElement}attachComponentPortal(t){if(this.portalOutlet()?.hasAttached())throw new Error("Attempting to attach modal content after content is already attached");return this.portalOutlet()?.attachComponentPortal(t)}attachTemplatePortal(t){if(this.portalOutlet()?.hasAttached())throw new Error("Attempting to attach modal content after content is already attached");return this.portalOutlet()?.attachTemplatePortal(t)}onOkClick(){this.okTriggered.emit()}onCloseClick(){this.cancelTriggered.emit()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=q({type:e,selectors:[["z-dialog"]],viewQuery:function(i,o){i&1&&et(o.portalOutlet,h,5),i&2&&nt()},hostVars:4,hostBindings:function(i,o){i&1&&(Y("dialog-enter"),tt("dialog-leave")),i&2&&(it(o.classes()),ot("width",o.config.zWidth?o.config.zWidth:null))},outputs:{okTriggered:"okTriggered",cancelTriggered:"cancelTriggered"},exportAs:["zDialog"],features:[J],decls:6,vars:4,consts:[["type","button","data-testid","z-close-header-button","z-button","","zType","ghost","zSize","sm",1,"absolute","top-1","right-1"],[1,"flex","flex-col","space-y-1.5","text-center","sm:text-left"],[1,"flex","flex-col","space-y-4"],["cdkPortalOutlet",""],["data-testid","z-content",3,"innerHTML"],[1,"flex","flex-col-reverse","gap-2","sm:flex-row","sm:justify-end","sm:gap-0","sm:space-x-2"],["type","button","data-testid","z-close-header-button","z-button","","zType","ghost","zSize","sm",1,"absolute","top-1","right-1",3,"click"],["zType","x"],["data-testid","z-title",1,"text-lg","leading-none","font-semibold","tracking-tight"],["data-testid","z-description",1,"text-muted-foreground","text-sm"],["type","button","data-testid","z-cancel-button","z-button","","zType","outline"],["type","button","data-testid","z-ok-button","z-button","",3,"zType","disabled"],["type","button","data-testid","z-cancel-button","z-button","","zType","outline",3,"click"],[3,"zType"],["type","button","data-testid","z-ok-button","z-button","",3,"click","zType","disabled"]],template:function(i,o){i&1&&(l(0,vt,2,0,"button",0),l(1,bt,2,1,"header",1),d(2,"main",2),X(3,Dt,0,0,"ng-template",3),l(4,kt,1,1,"div",4),p(),l(5,It,3,2,"footer",5)),i&2&&(s(o.config.zClosable||o.config.zClosable===void 0?0:-1),a(),s(o.config.zTitle||o.config.zDescription?1:-1),a(3),s(o.isStringContent?4:-1),a(),s(o.config.zHideFooter?-1:5))},dependencies:[P,E,h,U,gt],styles:["[_nghost-%COMP%]{opacity:1;transform:scale(1);transition:opacity .15s ease-out,transform .15s ease-out}@starting-style{[_nghost-%COMP%]{opacity:0;transform:scale(.9)}}.dialog-leave[_nghost-%COMP%]{opacity:0;transform:scale(.9);transition:opacity .15s ease-in,transform .15s ease-in}"],changeDetection:0})}},ut=class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=G({type:e})}static{this.\u0275inj=N({providers:[w],imports:[U,v,P,E]})}};export{m as a,ut as b,_t as c,w as d};
