import{a as Q,b as X,c as Y}from"./chunk-ZKGESBBT.js";import{a as ee}from"./chunk-MMO3LV47.js";import{a as q}from"./chunk-PFQCF4BB.js";import{F as g,Ua as f,Za as D,a as m,ba as b,db as z,fb as v,h as S,lb as J,mb as Z,o as h,pa as c,t as A,va as j}from"./chunk-XQKT32VU.js";import{b as k,c as G,e as W,f as $}from"./chunk-GEE437AJ.js";import{b as V,g as F}from"./chunk-CADW372H.js";import"./chunk-EZWRTDAZ.js";import"./chunk-5FFKEXUF.js";import{q as u,s as U}from"./chunk-OAPWU2O3.js";import{Ab as B,Ac as N,Db as E,Eb as L,Fb as l,Gb as s,Hb as n,Ib as d,Mb as I,Nb as H,Wa as r,Wb as _,_ as o,a as C,b as y,ic as p,jc as x,kb as T,kc as K,tc as w,vc as P,z as O,zb as R,zc as M}from"./chunk-565OUHKP.js";var ie=a=>({name:a}),ne=(a,t)=>t.id;function oe(a,t){if(a&1&&(s(0,"z-stat",6),d(1,"lucide-icon",7),n()),a&2){let e=_().$implicit;l("labelKey",e.labelKey)("value",e.value)("trend",e.trend),r(),l("img",e.icon)}}function re(a,t){if(a&1&&R(0,oe,2,4,"z-stat",6),a&2){let e=t.$implicit;B(e.value!=="0"&&e.value!=="#0"&&e.value!=="0%"&&e.value!=="0.0%"?0:-1)}}var te=class a{constructor(){this.theme=o(Y);this.candidateService=o(ee);this.translate=o(k);this.decimalPipe=o(u);this.user={name:"Candidate"};this.initials="";this.icons={Trophy:v,Target:D,TrendingUp:z,Award:S,Brain:h,Medal:j,CircleUserRound:g,Gauge:b,BarChart:A,ListChecks:c,Star:f,Activity:m};this.API_URL=$.apiUrl;this.tabs=[{labelKey:"DASHBOARD.TABS.OVERVIEW",route:"/dashboard/candidate/overview",icon:D},{labelKey:"DASHBOARD.TABS.PORTFOLIO",route:"/dashboard/candidate/portfolio",icon:f},{labelKey:"DASHBOARD.TABS.COACH",route:"/dashboard/candidate/coach",icon:h},{labelKey:"DASHBOARD.TABS.LEADERBOARD",route:"/dashboard/candidate/leaderboard",icon:v},{labelKey:"DASHBOARD.TABS.SUBMISSIONS",route:"/dashboard/candidate/mysubmissions",icon:c},{labelKey:"DASHBOARD.TABS.PROFILE",route:"/dashboard/candidate/profile",icon:g}];this.stats=[{id:"amountOfChallenges",labelKey:"DASHBOARD.STATS.CHALLENGES_COMPLETED",value:"...",trend:"",icon:c},{id:"challengesWon",labelKey:"DASHBOARD.STATS.CHALLENGES_WON",value:"...",trend:"",icon:S},{id:"highestAiScore",labelKey:"DASHBOARD.STATS.HIGHEST_AI_SCORE",value:"...",trend:"",icon:b},{id:"averageAiScore",labelKey:"DASHBOARD.STATS.AVERAGE_AI_SCORE",value:"...",trend:"",icon:m},{id:"globalRank",labelKey:"DASHBOARD.STATS.GLOBAL_RANK",value:"...",trend:"",icon:A}]}ngOnInit(){this.theme.setTheme("candidate"),this.loadDashboardData(),this.setupLanguageListener()}loadDashboardData(){O({user:this.candidateService.getMe(),stats:this.candidateService.getCandidateStats()}).subscribe({next:t=>{this.user=t.user?.data?.user||t.user?.data||{},console.log("User Data:",this.user),console.log("Stats Data:",t.stats),this.calculateInitials(this.user.name);let e=t.stats?.data||{};this.updateStatValue("amountOfChallenges",e.amountOfChallenges?.toString()??"0"),this.updateStatValue("challengesWon",e.challengesWon?.toString()??"0"),this.updateStatValue("highestAiScore",`${this.decimalPipe.transform(e.highestAiScore,"1.0-0")??"0"}%`),this.updateStatValue("averageAiScore",`${this.decimalPipe.transform(e.averageAiScore,"1.1-1")??"0.0"}%`),this.updateStatValue("globalRank",`#${e.globalRank?.toString()??"0"}`)},error:t=>{console.error("Failed to load dashboard data",t),this.stats.forEach(e=>e.value="0")}})}updateStatValue(t,e){let i=this.stats.findIndex(ae=>ae.id===t);i!==-1&&(this.stats[i]=y(C({},this.stats[i]),{value:e}))}calculateInitials(t){if(!t)return;let e=t.split(" ");this.initials=e.length>=2?(e[0][0]+e[1][0]).toUpperCase():t.slice(0,2).toUpperCase()}setupLanguageListener(){this.updateDirection(this.translate.currentLang),this.langSub=this.translate.onLangChange.subscribe(t=>{this.updateDirection(t.lang)})}updateDirection(t){let e=t==="ar";document.body.setAttribute("dir",e?"rtl":"ltr"),document.body.classList.toggle("rtl-mode",e)}ngOnDestroy(){this.langSub?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=T({type:a,selectors:[["app-candidate-shell"]],features:[w([u])],decls:13,vars:8,consts:[["titleKey","DASHBOARD.WELCOME","subtitleKey","DASHBOARD.SUBTITLE",3,"titleParams","tabs"],["avatar",""],["actions","",1,"flex","flex-row","items-center","justify-end","gap-2","sm:gap-3","w-full","sm:w-auto"],[1,"shrink-0"],[1,"flex-1","sm:flex-none","px-4","py-3","text-sm","md:px-6","md:py-3","md:text-base","bg-gray-900","text-white","rounded-lg","hover:bg-gray-800","transition-all","font-medium","shadow-xl","shadow-gray-900/10","whitespace-nowrap"],["stats",""],[3,"labelKey","value","trend"],["icon","",1,"w-5","h-5",3,"img"]],template:function(e,i){e&1&&(s(0,"app-dashboard-layout",0)(1,"span",1),p(2),n(),s(3,"div",2)(4,"div",3),d(5,"app-notifications-dropdown"),n(),s(6,"button",4),p(7),M(8,"translate"),n()(),I(9,5),E(10,re,1,1,null,null,ne),H(),d(12,"router-outlet"),n()),e&2&&(l("titleParams",P(6,ie,i.user.name||"Candidate"))("tabs",i.tabs),r(2),x(i.initials),r(5),K(" ",N(8,4,"DASHBOARD.ACTIONS.COACH")," "),r(3),L(i.stats))},dependencies:[U,Q,X,Z,J,W,F,V,q,G],encapsulation:2})}};export{te as CandidateShellComponent};
