import{Fa as $,R as P,Ua as W,c as j,jb as X,lb as z,mb as Q,u as V,ua as F}from"./chunk-XQKT32VU.js";import{c as R,e as H,f as h}from"./chunk-GEE437AJ.js";import{a as M,d as k}from"./chunk-CADW372H.js";import"./chunk-EZWRTDAZ.js";import{b as L}from"./chunk-5FFKEXUF.js";import{j as T,k as O,l as B,n as w,o as U,s as N}from"./chunk-OAPWU2O3.js";import{Ac as d,Fb as o,Gb as a,Hb as n,Ib as u,Pb as C,Sa as b,Ub as E,Wa as t,Wb as c,_ as D,da as _,ea as I,f as v,fc as y,ic as r,jc as p,kb as A,kc as m,pb as g,s as f,zc as l}from"./chunk-565OUHKP.js";function K(i,s){i&1&&(a(0,"div",8),u(1,"div",9),a(2,"p",10),r(3),l(4,"translate"),n()()),i&2&&(t(3),p(d(4,1,"COMMON.LOADING_DETAILS")))}function Y(i,s){if(i&1&&(a(0,"div",11),u(1,"lucide-icon",12),a(2,"p",13),r(3),n()()),i&2){let e=c();t(),o("img",e.icons.X),t(2),p(e.error)}}function J(i,s){if(i&1&&(a(0,"div",48),r(1),n()),i&2){let e=c(2);t(),m(" ",e.getCandidateInitials(e.submission.candidateId.name)," ")}}function q(i,s){if(i&1&&u(0,"img",49),i&2){let e=c(2);o("src",e.submission.candidateId.profilePicture,b)("alt",e.submission.candidateId.name)}}function Z(i,s){if(i&1&&(a(0,"div")(1,"div",29)(2,"span",30),r(3),l(4,"translate"),n(),a(5,"span",31),r(6),n()(),a(7,"div",32),u(8,"div",33),n()()),i&2){let e=c(2);t(3),p(d(4,4,"DASHBOARD.SUBMISSION_DETAILS.CLARITY_SCORE")),t(3),p(e.getClarityScore(e.submission)),t(2),y("width",e.getClarityScore(e.submission),"%")}}function ee(i,s){if(i&1&&(a(0,"div",50)(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"p",52),r(5),n()()),i&2){let e=c(2);t(2),m(" ",d(3,2,"DASHBOARD.SUBMISSION_DETAILS.FEEDBACK")," "),t(3),p(e.submission.aiEvaluation==null?null:e.submission.aiEvaluation.feedback)}}function te(i,s){if(i&1&&(a(0,"li"),r(1),n()),i&2){let e=s.$implicit;t(),m(" ",e," ")}}function ie(i,s){if(i&1&&(a(0,"div")(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"ul",54),g(5,te,2,1,"li",55),n()()),i&2){let e=c(3);t(2),m(" ",d(3,2,"DASHBOARD.SUBMISSION_DETAILS.STRENGTHS")," "),t(3),o("ngForOf",e.submission.aiEvaluation==null?null:e.submission.aiEvaluation.strengths)}}function ne(i,s){if(i&1&&(a(0,"li"),r(1),n()),i&2){let e=s.$implicit;t(),m(" ",e," ")}}function ae(i,s){if(i&1&&(a(0,"div")(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"ul",54),g(5,ne,2,1,"li",55),n()()),i&2){let e=c(3);t(2),m(" ",d(3,2,"DASHBOARD.SUBMISSION_DETAILS.IMPROVEMENTS")," "),t(3),o("ngForOf",e.submission.aiEvaluation==null?null:e.submission.aiEvaluation.improvements)}}function se(i,s){if(i&1&&(a(0,"div",53),g(1,ie,6,4,"div",34)(2,ae,6,4,"div",34),n()),i&2){let e=c(2);t(),o("ngIf",e.submission.aiEvaluation==null||e.submission.aiEvaluation.strengths==null?null:e.submission.aiEvaluation.strengths.length),t(),o("ngIf",e.submission.aiEvaluation==null||e.submission.aiEvaluation.improvements==null?null:e.submission.aiEvaluation.improvements.length)}}function re(i,s){i&1&&(a(0,"span",56),r(1),l(2,"translate"),n()),i&2&&(t(),m(" ",d(2,1,"DASHBOARD.SUBMISSION_DETAILS.WINNER")," "))}function oe(i,s){if(i&1&&(a(0,"div",57)(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"p",58),r(5),n()()),i&2){let e=c(2);t(2),m(" ",d(3,2,"DASHBOARD.SUBMISSION_DETAILS.TEXT_CONTENT")," "),t(3),p(e.submission.textContent)}}function le(i,s){if(i&1&&(a(0,"div",57)(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"a",59),r(5),u(6,"lucide-icon",45),n()()),i&2){let e=c(2);t(2),m(" ",d(3,4,"DASHBOARD.SUBMISSION_DETAILS.SUBMISSION_LINK")," "),t(2),o("href",e.submission.linkUrl,b),t(),m(" ",e.submission.linkUrl," "),t(),o("img",e.icons.ExternalLink)}}function de(i,s){if(i&1&&(a(0,"li")(1,"a",59),r(2),u(3,"lucide-icon",45),n()()),i&2){let e=s.$implicit,x=c(3);t(),o("href",e,b),t(),m(" ",e.split("/").pop()," "),t(),o("img",x.icons.ExternalLink)}}function me(i,s){if(i&1&&(a(0,"div",57)(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"ul",60),g(5,de,4,3,"li",55),n()()),i&2){let e=c(2);t(2),m(" ",d(3,2,"DASHBOARD.SUBMISSION_DETAILS.FILES")," "),t(3),o("ngForOf",e.submission.fileUrls)}}function pe(i,s){if(i&1){let e=C();a(0,"div",57)(1,"h4",51),r(2),l(3,"translate"),n(),a(4,"button",61),E("click",function(){_(e);let S=c(2);return I(S.watchVideo(S.submission.videoExplanationUrl))}),u(5,"lucide-icon",45),r(6),l(7,"translate"),n()()}if(i&2){let e=c(2);t(2),m(" ",d(3,3,"DASHBOARD.SUBMISSION_DETAILS.VIDEO_EXPLANATION")," "),t(3),o("img",e.icons.Play),t(),m(" ",d(7,5,"DASHBOARD.SUBMISSIONS.WATCH_VIDEO")," ")}}function ce(i,s){if(i&1){let e=C();a(0,"div",14)(1,"div",15)(2,"div",16),g(3,J,2,1,"div",17)(4,q,1,2,"img",18),a(5,"div")(6,"h3",19),r(7),n(),a(8,"p",20),r(9),n()()(),a(10,"div",21)(11,"p",22),r(12),l(13,"translate"),n(),a(14,"h4",23),r(15),n(),a(16,"div",24)(17,"span"),r(18),n(),r(19," \xB7 "),a(20,"span"),r(21),l(22,"titlecase"),n(),r(23," \xB7 "),a(24,"span"),r(25),n()()()(),a(26,"div",15)(27,"div",25)(28,"h3",19),r(29),l(30,"translate"),n(),a(31,"div",26)(32,"div",4),r(33),n(),a(34,"div",27),r(35),l(36,"translate"),n()()(),a(37,"div",28)(38,"div")(39,"div",29)(40,"span",30),r(41),l(42,"translate"),n(),a(43,"span",31),r(44),n()(),a(45,"div",32),u(46,"div",33),n()(),g(47,Z,9,6,"div",34),a(48,"div")(49,"div",29)(50,"span",30),r(51),l(52,"translate"),n(),a(53,"span",31),r(54),n()(),a(55,"div",32),u(56,"div",33),n()()(),g(57,ee,6,4,"div",35)(58,se,3,2,"div",36),n(),a(59,"div",15)(60,"h3",37),r(61),l(62,"translate"),n(),a(63,"div",38)(64,"span",39),r(65),l(66,"translate"),n(),a(67,"span",40),r(68),l(69,"uppercase"),n(),g(70,re,3,3,"span",41),n(),g(71,oe,6,4,"div",42)(72,le,7,6,"div",42)(73,me,6,4,"div",42)(74,pe,8,7,"div",42),n(),a(75,"div",43)(76,"button",44),E("click",function(){_(e);let S=c();return I(S.shortlistSubmission(S.submission._id))}),u(77,"lucide-icon",45),r(78),l(79,"translate"),n(),a(80,"a",46),u(81,"lucide-icon",45),r(82),l(83,"translate"),n(),a(84,"button",47),E("click",function(){_(e);let S=c();return I(S.rejectSubmission(S.submission._id))}),u(85,"lucide-icon",45),r(86),l(87,"translate"),n()()()}if(i&2){let e=c();t(3),o("ngIf",!e.submission.candidateId.profilePicture),t(),o("ngIf",e.submission.candidateId.profilePicture),t(3),p(e.submission.candidateId.name),t(2),p(e.submission.candidateId.email),t(3),p(d(13,41,"COMMON.CHALLENGE")),t(3),p(e.submission.challengeId.title),t(3),p(e.submission.challengeId.category),t(3),p(d(22,43,e.submission.challengeId.difficulty)),t(4),p(e.getFormattedDate(e.submission.createdAt)),t(4),m(" ",d(30,45,"DASHBOARD.SUBMISSION_DETAILS.AI_EVALUATION")," "),t(4),p(e.submission.aiScore),t(2),p(d(36,47,"DASHBOARD.SUBMISSIONS.OVERALL")),t(6),p(d(42,49,"DASHBOARD.SUBMISSIONS.TECHNICAL_QUALITY")),t(3),p(e.getTechnicalQuality(e.submission)),t(2),y("width",e.getTechnicalQuality(e.submission),"%"),t(),o("ngIf",e.submission.aiEvaluation==null?null:e.submission.aiEvaluation.clarityScore),t(4),p(d(52,51,"DASHBOARD.SUBMISSIONS.COMMUNICATION")),t(3),p(e.getCommunicationScore(e.submission)),t(2),y("width",e.getCommunicationScore(e.submission),"%"),t(),o("ngIf",e.submission.aiEvaluation==null?null:e.submission.aiEvaluation.feedback),t(),o("ngIf",(e.submission.aiEvaluation==null||e.submission.aiEvaluation.strengths==null?null:e.submission.aiEvaluation.strengths.length)||(e.submission.aiEvaluation==null||e.submission.aiEvaluation.improvements==null?null:e.submission.aiEvaluation.improvements.length)),t(3),m(" ",d(62,53,"DASHBOARD.SUBMISSION_DETAILS.SUBMISSION_CONTENT")," "),t(3),o("ngClass",e.getStatusClass(e.submission.status)),t(),m(" ",d(66,55,e.getStatusLabel(e.submission.status))," "),t(3),m(" ",d(69,57,e.submission.submissionType)," "),t(2),o("ngIf",e.submission.isWinner),t(),o("ngIf",e.submission.textContent),t(),o("ngIf",e.submission.linkUrl),t(),o("ngIf",e.submission.fileUrls&&e.submission.fileUrls.length>0),t(),o("ngIf",e.submission.videoExplanationUrl),t(2),o("disabled",e.submission.status==="accepted"),t(),o("img",e.icons.Star),t(),m(" ",d(79,59,"DASHBOARD.SUBMISSIONS.SHORTLIST")," "),t(2),o("href","mailto:"+e.submission.candidateId.email,b),t(),o("img",e.icons.Mail),t(),m(" ",d(83,61,"DASHBOARD.SUBMISSIONS.CONTACT")," "),t(2),o("disabled",e.submission.status==="rejected"),t(),o("img",e.icons.X),t(),m(" ",d(87,63,"COMMON.REJECT")," ")}}var G=class i{constructor(){this.route=D(M);this.http=D(L);this.icons={Play:$,ExternalLink:P,Mail:F,Check:V,X,Star:W,ArrowLeft:j};this.submission=null;this.isLoading=!0;this.error=null;this.submissionId=null}ngOnInit(){this.submissionId=this.route.snapshot.paramMap.get("id"),this.submissionId?this.loadSubmissionDetails(this.submissionId):(this.error="Submission ID not found in URL.",this.isLoading=!1)}loadSubmissionDetails(s){return v(this,null,function*(){try{this.isLoading=!0,this.error=null;let e=yield f(this.http.get(`${h.apiUrl}/submissions/${s}`));console.log("Submission details:",e),e.success&&e.data?(this.submission=e.data,console.log("Submission deeds:",this.submission)):this.error="Submission not found."}catch(e){console.error("Error loading submission details:",e),this.error=e?.error?.message||"Failed to load submission details."}finally{this.isLoading=!1}})}getCandidateInitials(s){let e=s.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():s.substring(0,2).toUpperCase()}getFormattedDate(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getTechnicalQuality(s){return s.aiEvaluation?.technicalScore||Math.min(Math.floor(s.aiScore*.95),100)}getClarityScore(s){return s.aiEvaluation?.clarityScore||0}getCommunicationScore(s){return s.aiEvaluation?.communicationScore||Math.min(Math.floor(s.aiScore*1.05),100)}getStatusClass(s){return{pending:"bg-green-100 text-green-700 border-green-200",accepted:"bg-blue-100 text-blue-700 border-blue-200",rejected:"bg-gray-100 text-gray-700 border-gray-200"}[s]||"bg-gray-100 text-gray-700 border-gray-200"}getStatusLabel(s){return{pending:"DASHBOARD.SUBMISSIONS.STATUS.NEW",accepted:"DASHBOARD.SUBMISSIONS.STATUS.SHORTLISTED",rejected:"DASHBOARD.SUBMISSIONS.STATUS.REVIEWED"}[s]||s}watchVideo(s){s&&window.open(s,"_blank")}openLink(s){s&&window.open(s,"_blank")}shortlistSubmission(s){return v(this,null,function*(){if(!(!this.submission||this.submission.status==="accepted"))try{yield f(this.http.put(`${h.apiUrl}/submissions/${s}/status`,{status:"accepted"})),this.submission.status="accepted"}catch(e){console.error("Error shortlisting submission:",e)}})}rejectSubmission(s){return v(this,null,function*(){if(!(!this.submission||this.submission.status==="rejected"))try{yield f(this.http.put(`${h.apiUrl}/submissions/${s}/status`,{status:"rejected"})),this.submission.status="rejected"}catch(e){console.error("Error rejecting submission:",e)}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=A({type:i,selectors:[["app-submission-details"]],decls:10,vars:7,consts:[[1,"submission-details-container","bg-[#fcfcfd]","min-h-screen","p-8"],[1,"mb-8","flex","items-center","gap-4"],["routerLink","/dashboard/company/submissions",1,"text-gray-600","hover:text-gray-900","transition-colors"],[1,"w-6","h-6",3,"img"],[1,"text-3xl","font-bold","text-[#101828]"],["class","text-center py-12",4,"ngIf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",4,"ngIf"],["class","space-y-8 max-w-4xl mx-auto",4,"ngIf"],[1,"text-center","py-12"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"mt-2","text-gray-600"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-xl","flex","items-start","gap-3"],[1,"w-5","h-5","text-red-600","shrink-0","mt-0.5",3,"img"],[1,"text-sm","text-red-700"],[1,"space-y-8","max-w-4xl","mx-auto"],[1,"bg-white","rounded-2xl","border","border-gray-100","p-6","shadow-sm"],[1,"flex","items-center","gap-4","mb-4"],["class","w-16 h-16 rounded-full text-white flex items-center justify-center font-semibold text-xl shrink-0","style","background: linear-gradient(120deg, #a6c0fe 0%, #f68084d6 100%)",4,"ngIf"],["class","w-16 h-16 rounded-full object-cover shrink-0",3,"src","alt",4,"ngIf"],[1,"font-semibold","text-xl","text-[#101828]"],[1,"text-gray-600","text-sm"],[1,"border-t","border-gray-100","pt-4","mt-4"],[1,"text-sm","text-gray-500","mb-1"],[1,"font-medium","text-lg","text-[#101828]"],[1,"flex","flex-wrap","gap-2","text-sm","text-gray-600","mt-2"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-right"],[1,"text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mb-6"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-sm","text-gray-600"],[1,"text-sm","font-semibold"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-500","bg-primary-gradient"],[4,"ngIf"],["class","mt-6 border-t border-gray-100 pt-4",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",4,"ngIf"],[1,"font-semibold","text-xl","text-[#101828]","mb-4"],[1,"flex","flex-wrap","gap-3","mb-6"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","border","whitespace-nowrap",3,"ngClass"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-gray-100","text-gray-700","border","border-gray-200","whitespace-nowrap"],["class","px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200 whitespace-nowrap",4,"ngIf"],["class","mb-4",4,"ngIf"],[1,"bg-white","rounded-2xl","border","border-gray-100","p-6","shadow-sm","flex","flex-wrap","gap-3","items-center"],[1,"flex","items-center","gap-2","px-4","py-2.5","text-white","rounded-lg","hover:opacity-90","transition-colors","text-sm","font-medium","disabled:opacity-50","disabled:cursor-not-allowed",2,"background","#a6c0fe",3,"click","disabled"],[1,"w-4","h-4",3,"img"],[1,"flex","items-center","gap-2","px-4","py-2.5","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"href"],[1,"flex","items-center","gap-2","px-4","py-2.5","border","border-red-300","text-red-700","bg-red-50","rounded-lg","hover:bg-red-100","transition-colors","text-sm","font-medium","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"w-16","h-16","rounded-full","text-white","flex","items-center","justify-center","font-semibold","text-xl","shrink-0",2,"background","linear-gradient(120deg, #a6c0fe 0%, #f68084d6 100%)"],[1,"w-16","h-16","rounded-full","object-cover","shrink-0",3,"src","alt"],[1,"mt-6","border-t","border-gray-100","pt-4"],[1,"font-medium","text-lg","text-[#101828]","mb-2"],[1,"text-gray-700","text-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-6"],[1,"list-disc","pl-5","text-sm","text-gray-700","space-y-1"],[4,"ngFor","ngForOf"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","bg-yellow-100","text-yellow-800","border","border-yellow-200","whitespace-nowrap"],[1,"mb-4"],[1,"text-gray-700","text-sm","leading-relaxed"],["target","_blank",1,"flex","items-center","gap-2","text-blue-600","hover:underline","text-sm","font-medium",3,"href"],[1,"space-y-1"],[1,"flex","items-center","gap-2","px-4","py-2.5","text-white","rounded-lg","transition-colors","text-sm","font-medium","shadow-sm","bg-black","hover:opacity-90",3,"click"]],template:function(e,x){e&1&&(a(0,"div",0)(1,"div",1)(2,"a",2),u(3,"lucide-icon",3),n(),a(4,"h2",4),r(5),l(6,"translate"),n()(),g(7,K,5,3,"div",5)(8,Y,4,2,"div",6)(9,ce,88,65,"div",7),n()),e&2&&(t(3),o("img",x.icons.ArrowLeft),t(2),m(" ",d(6,5,"DASHBOARD.SUBMISSION_DETAILS.TITLE")," "),t(2),o("ngIf",x.isLoading),t(),o("ngIf",x.error),t(),o("ngIf",!x.isLoading&&!x.error&&x.submission))},dependencies:[N,T,O,B,H,Q,z,k,U,w,R],encapsulation:2})}};export{G as SubmissionDetailsComponent};
