import{a as ae}from"./chunk-3JJQSS4P.js";import{a as oe}from"./chunk-7FDPPYTC.js";import{a as _}from"./chunk-SX7D23K2.js";import{O as X,a as Q,db as Z,fb as ee,ib as te,lb as ie,mb as ne}from"./chunk-XQKT32VU.js";import{c as T,e as I,f as w}from"./chunk-GEE437AJ.js";import{b as A}from"./chunk-5FFKEXUF.js";import{j as E,p as z,q as J,r as K,s as C}from"./chunk-OAPWU2O3.js";import{Ab as x,Ac as m,Bc as Y,Cb as H,Db as h,Eb as S,Fb as y,Gb as n,Hb as a,Ib as l,V as k,Wa as o,Wb as b,_ as v,fc as j,ic as r,jc as p,kb as u,kc as c,pa as g,sc as $,t as L,uc as G,wc as q,xc as V,yc as W,zb as f,zc as s}from"./chunk-565OUHKP.js";var se=(t,i)=>i.label;function de(t,i){if(t&1&&(n(0,"div")(1,"div",3)(2,"div",4)(3,"span",5),r(4),s(5,"translate"),a()(),n(6,"span",6),r(7),s(8,"number"),a()(),n(9,"div",7),l(10,"div",8),a()()),t&2){let e=i.$implicit;o(4),p(m(5,4,e.label)),o(3),p(m(8,6,e.value)),o(3),j("width",e.percentage,"%")}}var M=class t{constructor(){this.userService=v(ae);this.data=g([])}ngOnInit(){this.userService.getUserDistribution().subscribe(i=>this.data.set(i))}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-user-distribution"]],decls:7,vars:3,consts:[["title","User Distribution",1,"pb-10"],[1,"text-lg","font-bold","text-gray-900","mb-6"],[1,"space-y-5"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-3"],[1,"text-sm","font-semibold"],[1,"text-lg","font-semibold"],[1,"h-2","bg-gray-100","rounded-full","overflow-hidden"],[1,"h-full","rounded-full","transition-all","duration-1000","ease-out","bg-primary-gradient"]],template:function(e,d){e&1&&(n(0,"ui-card",0)(1,"h2",1),r(2),s(3,"translate"),a(),n(4,"div",2),h(5,de,11,8,"div",null,se),a()()),e&2&&(o(2),c(" ",m(3,1,"DASHBOARD.ADMIN.USER_DISTRIBUTION")," "),o(3),S(d.data()))},dependencies:[C,_,I,J,T],encapsulation:2})}};function pe(t,i){t&1&&(n(0,"div",2),l(1,"div",4)(2,"div",4)(3,"div",4),a())}function me(t,i){if(t&1&&(n(0,"div",3)(1,"div",5)(2,"span",6),r(3),s(4,"translate"),a(),n(5,"span",7),r(6),a()(),l(7,"div",8),n(8,"div",5)(9,"span",6),r(10),s(11,"translate"),a(),n(12,"span",7),r(13),a()(),l(14,"div",8),n(15,"div",5)(16,"span",6),r(17),s(18,"translate"),a(),n(19,"span",7),r(20),a()(),l(21,"div",8),n(22,"div",5)(23,"span",6),r(24),s(25,"translate"),a(),n(26,"span",7),r(27),s(28,"currency"),a()()()),t&2){let e=b();o(3),p(m(4,8,"DASHBOARD.ADMIN.NEW_SIGNUPS")),o(3),p(e.stats().newUsers),o(4),p(m(11,10,"DASHBOARD.ADMIN.CHALLENGES_POSTED")),o(3),p(e.stats().newChallenges),o(4),p(m(18,12,"DASHBOARD.GENERAL.SUBMISSIONS")),o(3),p(e.stats().submissions),o(4),p(m(25,14,"DASHBOARD.GENERAL.REVENUE")),o(3),p(m(28,16,e.stats().revenue))}}var O=class t{constructor(){this.http=v(A);this.stats=g({newUsers:0,newChallenges:0,submissions:0,revenue:0});this.loading=g(!0)}ngOnInit(){this.http.get(`${w.apiUrl}/stats/daily`).subscribe({next:i=>{this.stats.set(i.data||{newUsers:0,newChallenges:0,submissions:0,revenue:0}),this.loading.set(!1)},error:()=>this.loading.set(!1)})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-todays-stats"]],decls:6,vars:4,consts:[[1,"bg-linear-to-br","from-grad-start/20","to-grad-end/20","border-orange-200/50"],[1,"text-lg","font-semibold","mb-4"],[1,"animate-pulse","space-y-4"],[1,"space-y-2"],[1,"h-8","bg-gray-200/50","rounded"],[1,"flex","items-center","justify-between","p-2","rounded-lg"],[1,"text-sm","text-gray-700","font-medium"],[1,"text-xl","font-semibold","text-gray-900"],[1,"h-px","bg-grad-end/15"]],template:function(e,d){e&1&&(n(0,"ui-card",0)(1,"h3",1),r(2),s(3,"translate"),a(),f(4,pe,4,0,"div",2)(5,me,29,18,"div",3),a()),e&2&&(o(2),p(m(3,2,"DASHBOARD.ADMIN.TODAY_STATS")),o(2),x(d.loading()?4:5))},dependencies:[C,_,I,K,T],encapsulation:2})}};var ce=(t,i)=>({"bg-yellow-50 text-yellow-700 border-yellow-100":t,"bg-gray-50 text-gray-600 border-gray-100":i}),ge=(t,i,e)=>({"text-green-600":t,"text-yellow-600":i,"text-red-600":e}),ve=(t,i)=>i._id;function ue(t,i){t&1&&(n(0,"div",3),l(1,"div",5)(2,"div",5)(3,"div",5),a())}function fe(t,i){if(t&1&&l(0,"lucide-icon",11),t&2){let e=b(3);y("img",e.icons.TrendingUp)}}function xe(t,i){if(t&1&&(n(0,"div",6)(1,"div",8)(2,"h3",9),r(3),a(),n(4,"div",10),f(5,fe,1,1,"lucide-icon",11),n(6,"span",12),r(7),a()()(),n(8,"div",13)(9,"div")(10,"div",14),l(11,"lucide-icon",15),r(12," Participants "),a(),n(13,"div",16),r(14),a()(),n(15,"div")(16,"div",14),l(17,"lucide-icon",15),r(18," Avg Score "),a(),n(19,"div",17),r(20),n(21,"span",18),r(22,"/100"),a()()()()()),t&2){let e=i.$implicit,d=i.$index,F=b(2);o(2),y("title",$(e.title)),o(),c(" ",e.title," "),o(2),x(d===0?5:-1),o(),y("ngClass",q(11,ce,d===0,d>0)),o(),c(" #",d+1," "),o(4),y("img",F.icons.Users),o(3),p(e.participants),o(3),y("img",F.icons.Activity),o(2),y("ngClass",V(14,ge,e.quality>=80,e.quality>=50&&e.quality<80,e.quality<50)),o(),c(" ",e.quality," ")}}function ye(t,i){if(t&1&&(n(0,"div",7),l(1,"lucide-icon",19),n(2,"p",20),r(3,"No active challenges found."),a(),n(4,"p",21),r(5,"Once users submit, data will appear here."),a()()),t&2){let e=b(2);o(),y("img",e.icons.Trophy)}}function be(t,i){if(t&1&&(n(0,"div",4),h(1,xe,23,18,"div",6,ve),f(3,ye,6,1,"div",7),a()),t&2){let e=b();o(),S(e.challenges()),o(2),x(e.challenges().length===0?3:-1)}}var U=class t{constructor(){this.challengeService=v(oe);this.challenges=g([]);this.loading=g(!0);this.icons={Trophy:ee,TrendingUp:Z,Users:te,DollarSign:X,Activity:Q}}ngOnInit(){this.challengeService.getTopChallenges().subscribe({next:i=>{this.challenges.set(i),this.loading.set(!1)},error:i=>{console.error("Failed to load top challenges",i),this.loading.set(!1)}})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-top-challenges"]],decls:11,vars:7,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-xs","text-gray-500","mt-1"],[1,"space-y-3","animate-pulse"],[1,"space-y-3"],[1,"h-24","bg-gray-100","rounded-xl"],[1,"relative","bg-white","rounded-xl","p-4","hover:bg-gray-50","transition-all","border","border-gray-100","hover:border-gray-200","group","cursor-default","shadow-xs"],[1,"text-center","py-12","bg-gray-50","rounded-xl","border","border-dashed","border-gray-200"],[1,"flex","items-start","justify-between","mb-3","gap-2"],[1,"text-sm","font-semibold","text-gray-900","transition-colors","line-clamp-1",3,"title"],[1,"flex","items-center","gap-1","shrink-0"],[1,"w-3","h-3","text-green-600",3,"img"],[1,"text-xs","font-bold","px-1.5","py-0.5","rounded","border",3,"ngClass"],[1,"grid","grid-cols-2","gap-2","text-sm","border-t","border-gray-100","pt-3"],[1,"text-[10px]","uppercase","text-gray-400","font-bold","tracking-wider","mb-0.5","flex","items-center","gap-1"],[1,"w-3","h-3",3,"img"],[1,"font-bold","text-gray-900"],[1,"font-bold","flex","items-center","gap-1",3,"ngClass"],[1,"text-[10px]","text-gray-400","font-normal"],[1,"w-8","h-8","text-gray-300","mx-auto","mb-2",3,"img"],[1,"text-gray-500","text-sm","font-medium"],[1,"text-xs","text-gray-400"]],template:function(e,d){e&1&&(n(0,"ui-card")(1,"div",0)(2,"div")(3,"h2",1),r(4),s(5,"translate"),a(),n(6,"p",2),r(7),s(8,"translate"),a()()(),f(9,ue,4,0,"div",3)(10,be,4,1,"div",4),a()),e&2&&(o(4),c(" ",m(5,3,"DASHBOARD.ADMIN.TOP_CHALLENGES")," "),o(3),c(" ",m(8,5,"DASHBOARD.ADMIN.TOP_CHALLENGES_SUBTITLE")," "),o(2),x(d.loading()?9:10))},dependencies:[C,E,_,ne,ie,I,T],encapsulation:2})}};var R=class t{constructor(){this.http=v(A);this.apiUrl=`${w.apiUrl}/activity`}getRecentActivity(){return this.http.get(this.apiUrl).pipe(L(i=>Array.isArray(i)?i:i.data||[]))}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}};var Ce=()=>[1,2,3,4,5],_e=(t,i,e,d)=>({"bg-green-500 ring-green-100":t,"bg-yellow-500 ring-yellow-100":i,"bg-blue-500 ring-blue-100":e,"bg-red-500 ring-red-100":d}),he=(t,i)=>i._id;function Se(t,i){t&1&&(n(0,"div",3),l(1,"div",4),n(2,"div",5),l(3,"div",6)(4,"div",7),a()())}function Te(t,i){t&1&&(n(0,"div",1),h(1,Se,5,0,"div",3,H),a()),t&2&&(o(),S(G(0,Ce)))}function Ie(t,i){if(t&1&&(n(0,"span",15),r(1,"\u2022"),a(),n(2,"span",16),r(3),a()),t&2){let e=b().$implicit;o(3),c(" ",e.userId==null?null:e.userId.name," ")}}function De(t,i){if(t&1&&(n(0,"div",8),l(1,"div",10),n(2,"div",11)(3,"p",12),r(4),a(),n(5,"div",13)(6,"span",14),r(7),s(8,"date"),a(),f(9,Ie,4,1),a()()()),t&2){let e=i.$implicit;o(),y("ngClass",W(7,_e,e.type==="success",e.type==="warning",e.type==="info",e.type==="error")),o(3),c(" ",e.action," "),o(3),c(" ",Y(8,4,e.createdAt,"MMM d, h:mm a")," "),o(2),x(e.userId!=null&&e.userId.name?9:-1)}}function Ee(t,i){t&1&&(n(0,"div",9),r(1,"No recent activity recorded."),a())}function Ae(t,i){if(t&1&&(n(0,"div",2),h(1,De,10,12,"div",8,he),f(3,Ee,2,0,"div",9),a()),t&2){let e=b();o(),S(e.activities()),o(2),x(e.activities().length===0?3:-1)}}var B=class t{constructor(){this.activityService=v(R);this.activities=g([]);this.loading=g(!0)}ngOnInit(){this.activityService.getRecentActivity().subscribe({next:i=>{this.activities.set(i),this.loading.set(!1)},error:i=>{console.error("Failed to load activity",i),this.loading.set(!1)}})}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-recent-activity"]],decls:5,vars:1,consts:[[1,"text-lg","font-bold","text-gray-900","mb-4","px-1"],[1,"space-y-4","animate-pulse","px-1"],[1,"space-y-1","overflow-y-auto","max-h-100","pr-2","custom-scrollbar"],[1,"flex","gap-3"],[1,"w-2","h-2","rounded-full","bg-gray-200","mt-2"],[1,"flex-1","space-y-2"],[1,"h-4","bg-gray-200","rounded","w-3/4"],[1,"h-3","bg-gray-100","rounded","w-1/4"],[1,"flex","items-start","gap-3","p-3","rounded-lg","hover:bg-gray-50","transition-colors","group"],[1,"text-center","py-10","text-gray-500","text-sm"],[1,"mt-2","w-2.5","h-2.5","rounded-full","shrink-0","ring-4","ring-opacity-20",3,"ngClass"],[1,"flex-1","min-w-0"],[1,"text-sm","text-gray-900","font-medium","leading-snug"],[1,"flex","items-center","gap-2","mt-1"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-400"],[1,"text-xs","text-gray-500","font-medium","bg-gray-100","px-1.5","py-0.5","rounded"]],template:function(e,d){e&1&&(n(0,"ui-card")(1,"h3",0),r(2,"Recent Activity"),a(),f(3,Te,3,1,"div",1)(4,Ae,4,1,"div",2),a()),e&2&&(o(3),x(d.loading()?3:4))},dependencies:[C,E,_,z],styles:[".custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#e5e7eb;border-radius:20px}"]})}};var le=class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-overview"]],decls:7,vars:0,consts:[[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"col-span-2","flex","flex-col","gap-6"],[1,"col-span-1","flex","flex-col","gap-6"]],template:function(e,d){e&1&&(n(0,"section",0)(1,"div",1),l(2,"app-user-distribution")(3,"app-top-challenges"),a(),n(4,"div",2),l(5,"app-todays-stats")(6,"app-recent-activity"),a()())},dependencies:[M,O,U,B],encapsulation:2})}};export{le as Overview};
