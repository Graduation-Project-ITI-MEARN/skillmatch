import{x as G}from"./chunk-CYRR275F.js";import{Fa as P,S as H,Ua as $,lb as j,mb as z,v as R,xa as V}from"./chunk-XQKT32VU.js";import{c as L,e as F,f as E}from"./chunk-GEE437AJ.js";import{c as U}from"./chunk-CADW372H.js";import"./chunk-EZWRTDAZ.js";import{b as N}from"./chunk-5FFKEXUF.js";import{j as B,k as D,l as k,s as M}from"./chunk-OAPWU2O3.js";import{Ac as p,Fb as l,Gb as s,Hb as a,Ib as g,Pb as y,Sa as A,Ub as S,Wa as t,Wb as d,_ as O,da as h,ea as _,f as v,fc as w,gc as I,ic as o,jc as u,kb as T,kc as m,pb as b,s as C,zc as c}from"./chunk-565OUHKP.js";function W(n,i){if(n&1&&(s(0,"span",17),o(1),a()),n&2){let e,r=d();t(),m(" ",(e=r.getSelectedChallenge())==null?null:e.title," ")}}function q(n,i){n&1&&(s(0,"span",18),o(1),c(2,"translate"),a()),n&2&&(t(),m(" ",p(2,1,"DASHBOARD.SUBMISSIONS.SELECT_CHALLENGE")," "))}function Y(n,i){n&1&&(s(0,"span",18),o(1),c(2,"translate"),a()),n&2&&(t(),m(" ",p(2,1,"COMMON.LOADING")," "))}function J(n,i){n&1&&(s(0,"div",22),o(1),c(2,"translate"),a()),n&2&&(t(),m(" ",p(2,1,"DASHBOARD.SUBMISSIONS.NO_CHALLENGES")," "))}function K(n,i){if(n&1){let e=y();s(0,"button",23),S("click",function(){let x=h(e).$implicit,f=d(2);return _(f.selectChallenge(x))}),o(1),a()}if(n&2){let e=i.$implicit,r=d(2);I("bg-gray-100",r.selectedChallengeId===e._id),t(),m(" ",e.title," ")}}function X(n,i){if(n&1&&(s(0,"div",19),b(1,J,3,3,"div",20)(2,K,2,3,"button",21),a()),n&2){let e=d();t(),l("ngIf",e.challenges.length===0),t(),l("ngForOf",e.challenges)}}function Z(n,i){if(n&1){let e=y();s(0,"button",24),S("click",function(){let x=h(e).$implicit,f=d();return _(f.setFilter(x))}),o(1),c(2,"translate"),a()}if(n&2){let e=i.$implicit,r=d();w("background",r.activeFilter===e?"black":"transparent"),I("text-white",r.activeFilter===e)("text-gray-600",r.activeFilter!==e)("hover:text-gray-900",r.activeFilter!==e),t(),m(" ",p(2,9,"DASHBOARD.SUBMISSIONS.FILTERS."+e.toUpperCase())," ")}}function ee(n,i){if(n&1&&(s(0,"div",25),g(1,"lucide-icon",26),s(2,"p",27),o(3),a()()),n&2){let e=d();t(),l("img",e.icons.MessageSquare),t(2),u(e.submitError)}}function te(n,i){n&1&&(s(0,"div",28),g(1,"div",29),s(2,"p",30),o(3),c(4,"translate"),a()()),n&2&&(t(3),u(p(4,1,"COMMON.LOADING")))}function ie(n,i){n&1&&(s(0,"div",31)(1,"p",32),o(2),c(3,"translate"),a()()),n&2&&(t(2),u(p(3,1,"DASHBOARD.SUBMISSIONS.NO_SUBMISSIONS")))}function ne(n,i){if(n&1&&(s(0,"div",58),o(1),a()),n&2){let e=d().$implicit,r=d(2);t(),m(" ",r.getCandidateInitials(e.candidateId.name)," ")}}function re(n,i){if(n&1&&g(0,"img",59),n&2){let e=d().$implicit;l("src",e.candidateId.profilePicture,A)("alt",e.candidateId.name)}}function se(n,i){if(n&1){let e=y();s(0,"button",60),S("click",function(){h(e);let x=d().$implicit,f=d(2);return _(f.watchVideo(x.videoExplanationUrl))}),g(1,"lucide-icon",55),o(2),c(3,"translate"),a()}if(n&2){let e=d(3);t(),l("img",e.icons.Play),t(),m(" ",p(3,2,"DASHBOARD.SUBMISSIONS.WATCH_VIDEO")," ")}}function ae(n,i){if(n&1){let e=y();s(0,"div",35)(1,"div",36)(2,"div",37),b(3,ne,2,1,"div",38)(4,re,1,2,"img",39),s(5,"div")(6,"h3",40),o(7),a(),s(8,"p",3),o(9),a()()(),s(10,"div",41)(11,"span",42),o(12),c(13,"translate"),a(),s(14,"div",43)(15,"div",44),o(16),a(),s(17,"div",45),o(18),c(19,"translate"),a()()()(),s(20,"div",46)(21,"div")(22,"div",47)(23,"span",48),o(24),c(25,"translate"),a(),s(26,"span",49),o(27),a()(),s(28,"div",50),g(29,"div",51),a()(),s(30,"div")(31,"div",47)(32,"span",48),o(33),c(34,"translate"),a(),s(35,"span",49),o(36),a()(),s(37,"div",50),g(38,"div",51),a()()(),s(39,"div",52),b(40,se,4,4,"button",53),s(41,"button",54),S("click",function(){let x=h(e).$implicit,f=d(2);return _(f.viewApplication(x._id))}),g(42,"lucide-icon",55),o(43),c(44,"translate"),a(),s(45,"a",56),g(46,"lucide-icon",55),o(47),c(48,"translate"),a(),s(49,"button",57),S("click",function(){let x=h(e).$implicit,f=d(2);return _(f.shortlistCandidate(x._id))}),g(50,"lucide-icon",55),o(51),c(52,"translate"),a()()()}if(n&2){let e=i.$implicit,r=d(2);t(3),l("ngIf",!e.candidateId.profilePicture),t(),l("ngIf",e.candidateId.profilePicture),t(3),u(e.candidateId.name),t(2),u(e.challengeId.title),t(2),l("ngClass",r.getStatusClass(e.status)),t(),m(" ",p(13,25,r.getStatusLabel(e.status))," "),t(4),u(e.aiScore),t(2),m(" ",p(19,27,"DASHBOARD.SUBMISSIONS.OVERALL")," "),t(6),u(p(25,29,"DASHBOARD.SUBMISSIONS.TECHNICAL_QUALITY")),t(3),u(r.getTechnicalQuality(e)),t(2),w("width",r.getTechnicalQuality(e),"%"),t(4),u(p(34,31,"DASHBOARD.SUBMISSIONS.COMMUNICATION")),t(3),u(r.getCommunication(e)),t(2),w("width",r.getCommunication(e),"%"),t(2),l("ngIf",e.videoExplanationUrl),t(2),l("img",r.icons.Eye),t(),m(" ",p(44,33,"DASHBOARD.SUBMISSIONS.VIEW_APPLICATION")," "),t(2),l("href","mailto:"+e.candidateId.email,A),t(),l("img",r.icons.MessageSquare),t(),m(" ",p(48,35,"DASHBOARD.SUBMISSIONS.CONTACT")," "),t(2),l("disabled",e.status==="accepted"),t(),l("img",r.icons.Star),t(),m(" ",p(52,37,"DASHBOARD.SUBMISSIONS.SHORTLIST")," ")}}function le(n,i){if(n&1&&(s(0,"div",33),b(1,ae,53,39,"div",34),a()),n&2){let e=d();t(),l("ngForOf",e.filteredSubmissions)}}var Q=class n{constructor(){this.http=O(N);this.router=O(U);this.icons={Play:P,Eye:H,MessageSquare:V,Star:$,ChevronDown:R};this.challenges=[];this.submissions=[];this.selectedChallengeId=null;this.isLoadingChallenges=!1;this.isLoadingSubmissions=!1;this.submitError="";this.activeFilter="all";this.filters=["all","new","shortlisted"];this.openChallengeDropdown=!1}ngOnInit(){return v(this,null,function*(){yield this.loadChallenges()})}loadChallenges(){return v(this,null,function*(){try{this.isLoadingChallenges=!0;let i=yield C(this.http.get(`${E.apiUrl}/challenges/mine`)),e=i.data||i;this.challenges=Array.isArray(e)?e:Object.values(e||{}),this.challenges.length>0&&(this.selectedChallengeId=this.challenges[0]._id,yield this.loadSubmissions(this.selectedChallengeId))}catch(i){console.error("Error loading challenges:",i),this.submitError="Failed to load challenges"}finally{this.isLoadingChallenges=!1}})}loadSubmissions(i){return v(this,null,function*(){try{this.isLoadingSubmissions=!0,this.submitError="";let e=yield C(this.http.get(`${E.apiUrl}/submissions/challenge/${i}`));this.submissions=e.data||[],console.log("\u062A\u0645 \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D:",this.submissions)}catch(e){console.error("Error:",e),this.submitError=e?.error?.message||"\u0641\u0634\u0644 \u0641\u064A \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",this.submissions=[]}finally{this.isLoadingSubmissions=!1}})}selectChallenge(i){this.selectedChallengeId=i._id,this.openChallengeDropdown=!1,this.loadSubmissions(i._id)}getSelectedChallenge(){return this.challenges.find(i=>i._id===this.selectedChallengeId)}setFilter(i){this.activeFilter=i}get filteredSubmissions(){if(this.activeFilter==="all")return this.submissions;let e={new:"pending",shortlisted:"accepted"}[this.activeFilter];return this.submissions.filter(r=>r.status===e)}getStatusClass(i){return{pending:"bg-green-100 text-green-700 border-green-200",accepted:"bg-blue-100 text-blue-700 border-blue-200",rejected:"bg-gray-100 text-gray-700 border-gray-200"}[i]||"bg-gray-100 text-gray-700 border-gray-200"}getStatusLabel(i){return{pending:"DASHBOARD.SUBMISSIONS.STATUS.NEW",accepted:"DASHBOARD.SUBMISSIONS.STATUS.SHORTLISTED",rejected:"DASHBOARD.SUBMISSIONS.STATUS.REVIEWED"}[i]||i}getCandidateInitials(i){let e=i.trim().split(" ");return e.length>=2?(e[0][0]+e[1][0]).toUpperCase():i.substring(0,2).toUpperCase()}getTechnicalQuality(i){return Math.min(Math.floor(i.aiScore*.95),100)}getCommunication(i){return Math.min(Math.floor(i.aiScore*1.05),100)}watchVideo(i){window.open(i,"_blank")}viewApplication(i){this.router.navigate(["/dashboard/company/submission-details",i])}shortlistCandidate(i){return v(this,null,function*(){try{yield C(this.http.put(`${E.apiUrl}/submissions/${i}/status`,{status:"accepted"})),this.selectedChallengeId&&(yield this.loadSubmissions(this.selectedChallengeId))}catch(e){console.error("Error shortlisting candidate:",e)}})}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=T({type:n,selectors:[["app-submissions"]],decls:22,vars:21,consts:[[1,"submissions-container","bg-[#fcfcfd]","min-h-screen"],[1,"mb-8"],[1,"text-2xl","font-semibold","text-[#101828]","mb-2"],[1,"text-gray-600","text-sm"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-4","mb-6"],[1,"relative","min-w-62.5"],["type","button",1,"w-full","px-4","py-3","border","border-gray-200","rounded-lg","bg-white","text-left","focus:outline-none","focus:ring-2","focus:ring-gray-900","flex","items-center","justify-between","hover:bg-gray-50","transition-colors",3,"click","disabled"],["class","text-gray-900 font-medium",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"w-5","h-5","text-gray-600","transition-transform",3,"img"],["class","absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",4,"ngIf"],[1,"flex","gap-2","bg-white","border","border-gray-200","rounded-lg","p-1"],["class","px-8 py-2 rounded-md text-sm font-medium transition-colors",3,"background","text-white","text-gray-600","hover:text-gray-900","click",4,"ngFor","ngForOf"],["class","mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","text-center py-12 text-gray-500",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"text-gray-900","font-medium"],[1,"text-gray-400"],[1,"absolute","z-10","w-full","mt-1","bg-white","border","border-gray-200","rounded-lg","shadow-lg","max-h-60","overflow-y-auto"],["class","px-4 py-3 text-gray-500 text-sm text-center",4,"ngIf"],["type","button","class","w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors text-sm font-medium",3,"bg-gray-100","click",4,"ngFor","ngForOf"],[1,"px-4","py-3","text-gray-500","text-sm","text-center"],["type","button",1,"w-full","text-left","px-4","py-3","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"click"],[1,"px-8","py-2","rounded-md","text-sm","font-medium","transition-colors",3,"click"],[1,"mb-6","p-4","bg-red-50","border","border-red-200","rounded-xl","flex","items-start","gap-3"],[1,"w-5","h-5","text-red-600","shrink-0","mt-0.5",3,"img"],[1,"text-sm","text-red-700"],[1,"text-center","py-12"],[1,"inline-block","animate-spin","rounded-full","h-8","w-8","border-b-2","border-gray-900"],[1,"mt-2","text-gray-600"],[1,"text-center","py-12","text-gray-500"],[1,"text-lg"],[1,"space-y-4"],["class","bg-white rounded-2xl border border-gray-100 p-6 hover:shadow-md transition-shadow",4,"ngFor","ngForOf"],[1,"bg-white","rounded-2xl","border","border-gray-100","p-6","hover:shadow-md","transition-shadow"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","gap-4","mb-6"],[1,"flex","gap-4","items-center"],["class","w-14 h-14 rounded-full text-white flex items-center justify-center font-semibold text-lg shrink-0","style","background: linear-gradient(120deg, #a6c0fe 0%, #f68084d6 100%)",4,"ngIf"],["class","w-14 h-14 rounded-full object-cover shrink-0",3,"src","alt",4,"ngIf"],[1,"font-semibold","text-lg","text-[#101828]"],[1,"flex","items-center","gap-3"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","border","whitespace-nowrap",3,"ngClass"],[1,"text-right"],[1,"text-2xl","font-bold","text-[#101828]"],[1,"text-xs","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-sm","text-gray-600"],[1,"text-sm","font-semibold"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","transition-all","duration-500",2,"background","linear-gradient(90deg, #a6c0fe 0%, #f68084d6 100%)"],[1,"flex","flex-wrap","gap-3"],["class","flex items-center gap-2 px-4 py-2.5 text-white rounded-lg transition-colors text-sm font-medium shadow-sm","style","background: black",3,"click",4,"ngIf"],[1,"flex","items-center","gap-2","px-4","py-2.5","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"click"],[1,"w-4","h-4",3,"img"],[1,"flex","items-center","gap-2","px-4","py-2.5","border","border-gray-300","rounded-lg","hover:bg-gray-50","transition-colors","text-sm","font-medium",3,"href"],[1,"flex","items-center","gap-2","px-4","py-2.5","text-white","rounded-lg","hover:opacity-90","transition-colors","text-sm","font-medium","disabled:opacity-50","disabled:cursor-not-allowed",2,"background","#a6c0fe",3,"click","disabled"],[1,"w-14","h-14","rounded-full","text-white","flex","items-center","justify-center","font-semibold","text-lg","shrink-0",2,"background","linear-gradient(120deg, #a6c0fe 0%, #f68084d6 100%)"],[1,"w-14","h-14","rounded-full","object-cover","shrink-0",3,"src","alt"],[1,"flex","items-center","gap-2","px-4","py-2.5","text-white","rounded-lg","transition-colors","text-sm","font-medium","shadow-sm",2,"background","black",3,"click"]],template:function(e,r){e&1&&(s(0,"div",0)(1,"div",1)(2,"h2",2),o(3),c(4,"translate"),a(),s(5,"p",3),o(6),c(7,"translate"),a()(),s(8,"div",4)(9,"div",5)(10,"button",6),S("click",function(){return r.openChallengeDropdown=!r.openChallengeDropdown}),b(11,W,2,1,"span",7)(12,q,3,3,"span",8)(13,Y,3,3,"span",8),g(14,"lucide-icon",9),a(),b(15,X,3,2,"div",10),a(),s(16,"div",11),b(17,Z,3,11,"button",12),a()(),b(18,ee,4,2,"div",13)(19,te,5,3,"div",14)(20,ie,4,3,"div",15)(21,le,2,1,"div",16),a()),e&2&&(t(3),m(" ",p(4,17,"DASHBOARD.SUBMISSIONS.TITLE")," "),t(3),m(" ",p(7,19,"DASHBOARD.SUBMISSIONS.SUBTITLE")," "),t(4),I("opacity-50",r.isLoadingChallenges),l("disabled",r.isLoadingChallenges),t(),l("ngIf",r.getSelectedChallenge()),t(),l("ngIf",!r.getSelectedChallenge()&&!r.isLoadingChallenges),t(),l("ngIf",r.isLoadingChallenges),t(),I("rotate-180",r.openChallengeDropdown),l("img",r.icons.ChevronDown),t(),l("ngIf",r.openChallengeDropdown),t(2),l("ngForOf",r.filters),t(),l("ngIf",r.submitError),t(),l("ngIf",r.isLoadingSubmissions),t(),l("ngIf",!r.isLoadingSubmissions&&r.filteredSubmissions.length===0),t(),l("ngIf",!r.isLoadingSubmissions&&r.filteredSubmissions.length>0))},dependencies:[M,B,D,k,G,F,z,j,L],styles:[".rotate-180[_ngcontent-%COMP%]{transform:rotate(180deg)}"]})}};export{Q as Submissions};
