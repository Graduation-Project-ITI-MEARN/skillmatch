import{c as F,d as g,e as O,f as P,j as z,k as U,l as Y,p as q,q as j,r as W,s as Z,t as J,u as K,v as Q,w as $,y as X}from"./chunk-CYRR275F.js";import{h as V}from"./chunk-LDRJV2AZ.js";import{a as ee}from"./chunk-U7IRUZXJ.js";import{b as B,c as H,e as M}from"./chunk-GEE437AJ.js";import{a as A,c as R,d as D,g as G}from"./chunk-CADW372H.js";import"./chunk-EZWRTDAZ.js";import"./chunk-5FFKEXUF.js";import{k as _,l as N,s as k}from"./chunk-OAPWU2O3.js";import{Ac as o,Fb as c,Gb as i,Hb as e,Ib as d,Ub as w,Wa as t,Wb as T,_ as E,a as I,b as S,fa as u,ga as C,gc as f,ic as a,jc as p,kb as L,kc as b,pb as h,zc as r}from"./chunk-565OUHKP.js";function ie(s,m){s&1&&(i(0,"div",45),u(),i(1,"svg",46),d(2,"path",47)(3,"line",48)(4,"line",49),e(),C(),i(5,"div")(6,"p",50),a(7),r(8,"translate"),e(),i(9,"p",51),a(10),r(11,"translate"),e()()()),s&2&&(t(7),p(o(8,2,"CHALLENGER.EDIT.RESTRICTED_MODE")),t(3),b(" ",o(11,4,"CHALLENGER.EDIT.RESTRICTED_DESC")," "))}function ne(s,m){s&1&&(u(),i(0,"svg",58),d(1,"polyline",59)(2,"polyline",60),e())}function le(s,m){s&1&&(u(),i(0,"svg",58),d(1,"path",61)(2,"path",62)(3,"path",63)(4,"circle",64),e())}function ae(s,m){s&1&&(u(),i(0,"svg",58),d(1,"polyline",65)(2,"polyline",66),e())}function re(s,m){s&1&&(u(),i(0,"svg",58),d(1,"path",67)(2,"polyline",68)(3,"line",69)(4,"line",70)(5,"polyline",71),e())}function oe(s,m){if(s&1&&(i(0,"label",52),d(1,"input",53),i(2,"div",54)(3,"div",55),h(4,ne,3,0,"svg",56)(5,le,5,0,"svg",56)(6,ae,3,0,"svg",56)(7,re,6,0,"svg",56),e(),i(8,"span",57),a(9),e()()()),s&2){let n=m.$implicit,l=T();t(),c("value",n.name),t(),f("opacity-50",l.isLocked),t(2),c("ngIf",n.icon==="code"),t(),c("ngIf",n.icon==="pen-tool"),t(),c("ngIf",n.icon==="trending-up"),t(),c("ngIf",n.icon==="file-text"),t(2),p(n.name)}}function se(s,m){s&1&&(u(),i(0,"svg",72),d(1,"circle",73)(2,"path",74),e())}var te=class s{constructor(){this.route=E(A);this.router=E(R);this.challengerService=E(ee);this.fb=E($);this.toastr=E(V);this.translate=E(B);this.challengeId="";this.isLocked=!1;this.isLoading=!1;this.currentStatus="published";this.categories=[{name:"Development",icon:"code"},{name:"Design",icon:"pen-tool"},{name:"Marketing",icon:"trending-up"},{name:"Writing",icon:"file-text"},{name:"Translation",icon:"file-text"},{name:"Data Entry",icon:"file-text"}];this.form=this.fb.group({title:["",g.required],description:["",g.required],category:["",g.required],difficulty:["medium",g.required],type:["prize",g.required],prizeAmount:[0,g.required],duration:[7,g.required],skills:["",g.required]})}ngOnInit(){this.challengeId=this.route.snapshot.paramMap.get("id")||"",this.challengeId&&this.loadChallenge()}trackByName(m,n){return n.name}loadChallenge(){this.challengerService.getChallengeById(this.challengeId).subscribe(m=>{if(!m.data){this.toastr.error("Challenge not found"),this.router.navigate(["/dashboard/challenger"]);return}let n=m.data;this.currentStatus=n.status;let l=7;if(n.deadline){let y=new Date(n.deadline).getTime()-new Date().getTime();l=Math.ceil(y/(1e3*60*60*24)),l<1&&(l=1)}let x=Array.isArray(n.skills)?n.skills.join(", "):n.skills||"";this.form.patchValue({title:n.title,description:n.description,category:n.category,difficulty:n.difficulty,type:n.type,prizeAmount:n.prizeAmount,duration:l,skills:x});let v=(n.submissionCount||0)>0;(n.status==="closed"||n.status==="published"&&v)&&(this.isLocked=!0,this.form.get("title")?.disable(),this.form.get("prizeAmount")?.disable(),this.form.get("category")?.disable(),this.form.get("type")?.disable(),this.form.get("difficulty")?.disable())})}onSave(){if(this.form.invalid)return;this.isLoading=!0;let m=Number(this.form.get("duration")?.value)||7,n=new Date;n.setDate(n.getDate()+m);let l=this.form.getRawValue(),x=typeof l.skills=="string"?l.skills.split(",").map(y=>y.trim()):l.skills,v=S(I({},l),{skills:x,tags:x,status:this.currentStatus,deadline:n.toISOString()});this.challengerService.updateChallenge(this.challengeId,v).subscribe({next:()=>{this.toastr.success(this.translate.instant("CHALLENGER.EDIT.SUCCESS")),this.router.navigate(["/dashboard/challenger"])},error:()=>{this.toastr.error(this.translate.instant("CHALLENGER.EDIT.ERROR")),this.isLoading=!1}})}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=L({type:s,selectors:[["app-edit-challenge"]],decls:110,vars:77,consts:[[1,"min-h-screen","bg-gray-50","p-6","lg:p-8"],[1,"max-w-4xl","mx-auto"],[1,"flex","items-center","gap-4","mb-8"],["routerLink","/dashboard/challenger",1,"p-2","bg-white","rounded-lg","border","border-gray-200","hover:bg-gray-50","transition-colors"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m15 18-6-6 6-6"],[1,"text-2xl","font-bold","text-gray-900"],["class","mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex items-start gap-3 text-yellow-800 animate-fade-in",4,"ngIf"],[1,"bg-white","rounded-3xl","p-8","border","border-gray-200","shadow-xl","shadow-slate-200/50"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"text-lg","font-bold","text-slate-900","mb-4","flex","items-center","gap-2"],[1,"w-6","h-6","bg-blue-100","text-blue-600","rounded-full","flex","items-center","justify-center","text-xs"],[1,"space-y-4","pl-8"],[1,"block","text-sm","font-semibold","text-slate-700","mb-2"],["formControlName","title","type","text",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500","transition-all","text-sm"],["formControlName","description","rows","4",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500","transition-all","text-sm","resize-none"],[1,"border-slate-100"],[1,"pl-8"],[1,"text-sm","font-bold","text-slate-700","block","mb-3"],[1,"grid","grid-cols-2","md:grid-cols-5","gap-4","mb-6"],["class","cursor-pointer group relative",4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["formControlName","difficulty",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500"],["value","easy"],["value","medium"],["value","hard"],["formControlName","duration","type","number","min","1","max","60",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500","font-bold"],["formControlName","skills","type","text",1,"w-full","px-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500"],[1,"pl-8","grid","grid-cols-1","md:grid-cols-2","gap-8","items-start"],[1,"space-y-4"],[1,"relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-slate-400","font-bold"],["formControlName","prizeAmount","type","number",1,"w-full","pl-14","pr-4","py-3","bg-slate-50","border","border-slate-200","rounded-xl","outline-none","focus:ring-2","focus:ring-blue-500","font-mono","font-bold","text-slate-900","text-lg"],[1,"flex","gap-4"],[1,"flex-1","cursor-pointer"],["type","radio","formControlName","type","value","prize",1,"peer","sr-only"],[1,"px-4","py-3","rounded-xl","border-2","border-slate-100","bg-white","hover:border-slate-300","peer-checked:border-blue-600","peer-checked:bg-blue-50","transition-all","text-center"],[1,"text-sm","font-bold","text-slate-700","peer-checked:text-blue-700"],["type","radio","formControlName","type","value","job",1,"peer","sr-only"],[1,"px-4","py-3","rounded-xl","border-2","border-slate-100","bg-white","hover:border-slate-300","peer-checked:border-purple-600","peer-checked:bg-purple-50","transition-all","text-center"],[1,"text-sm","font-bold","text-slate-700","peer-checked:text-purple-700"],[1,"flex","gap-4","pt-6","border-t","border-slate-100","mt-8"],["type","button","routerLink","/dashboard/challenger",1,"px-8","py-3.5","bg-white","text-slate-700","rounded-xl","hover:bg-slate-50","transition-all","font-bold","border","border-slate-200"],["type","submit",1,"flex-1","px-6","py-3.5","bg-slate-900","text-white","rounded-xl","hover:bg-slate-800","transition-all","font-bold","shadow-lg","shadow-slate-900/20","disabled:opacity-70","disabled:cursor-not-allowed","flex","items-center","justify-center","gap-2",3,"disabled"],["class","animate-spin -ml-1 mr-2 h-5 w-5 text-white","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",4,"ngIf"],[1,"mb-6","p-4","bg-yellow-50","border","border-yellow-200","rounded-xl","flex","items-start","gap-3","text-yellow-800","animate-fade-in"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"font-bold"],[1,"text-sm","mt-1"],[1,"cursor-pointer","group","relative"],["type","radio","formControlName","category",1,"peer","sr-only",3,"value"],[1,"flex","flex-col","items-center","justify-center","p-4","rounded-xl","border-2","border-slate-100","bg-white","transition-all","duration-200","peer-checked:border-blue-600","peer-checked:bg-blue-50","peer-checked:ring-1","peer-checked:ring-blue-600","hover:bg-slate-50"],[1,"mb-2","text-slate-400","peer-checked:text-blue-600","transition-colors"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"text-xs","font-bold","text-slate-600","peer-checked:text-blue-700","tracking-wide"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["points","16 18 22 12 16 6"],["points","8 6 2 12 8 18"],["d","M12 19l7-7 3 3-7 7-3-3z"],["d","M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"],["d","M2 2l7.586 7.586"],["cx","11","cy","11","r","2"],["points","23 6 13.5 15.5 8.5 10.5 1 18"],["points","17 6 23 6 23 12"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["points","10 9 9 9 8 9"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-2","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(n,l){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),u(),i(4,"svg",4),d(5,"path",5),e()(),C(),i(6,"h1",6),a(7),r(8,"translate"),e()(),h(9,ie,12,6,"div",7),i(10,"div",8)(11,"form",9),w("ngSubmit",function(){return l.onSave()}),i(12,"div")(13,"h3",10)(14,"span",11),a(15,"1"),e(),a(16),r(17,"translate"),e(),i(18,"div",12)(19,"div")(20,"label",13),a(21),r(22,"translate"),e(),d(23,"input",14),e(),i(24,"div")(25,"label",13),a(26),r(27,"translate"),e(),d(28,"textarea",15),e()()(),d(29,"hr",16),i(30,"div")(31,"h3",10)(32,"span",11),a(33,"2"),e(),a(34),r(35,"translate"),e(),i(36,"div",17)(37,"label",18),a(38),r(39,"translate"),e(),i(40,"div",19),h(41,oe,10,8,"label",20),e(),i(42,"div",21)(43,"div")(44,"label",13),a(45),r(46,"translate"),e(),i(47,"select",22)(48,"option",23),a(49),r(50,"translate"),e(),i(51,"option",24),a(52),r(53,"translate"),e(),i(54,"option",25),a(55),r(56,"translate"),e()()(),i(57,"div")(58,"label",13),a(59),r(60,"translate"),e(),d(61,"input",26),e(),i(62,"div")(63,"label",13),a(64),r(65,"translate"),e(),d(66,"input",27),e()()()(),d(67,"hr",16),i(68,"div")(69,"h3",10)(70,"span",11),a(71,"3"),e(),a(72),r(73,"translate"),e(),i(74,"div",28)(75,"div",29)(76,"div")(77,"label",13),a(78),r(79,"translate"),e(),i(80,"div",30)(81,"span",31),a(82,"EGP"),e(),d(83,"input",32),e()(),i(84,"div")(85,"label",13),a(86),r(87,"translate"),e(),i(88,"div",33)(89,"label",34),d(90,"input",35),i(91,"div",36)(92,"span",37),a(93),r(94,"translate"),e()()(),i(95,"label",34),d(96,"input",38),i(97,"div",39)(98,"span",40),a(99),r(100,"translate"),e()()()()()()()(),i(101,"div",41)(102,"button",42),a(103),r(104,"translate"),e(),i(105,"button",43),h(106,se,3,0,"svg",44),a(107),r(108,"translate"),r(109,"translate"),e()()()()()()),n&2&&(t(7),p(o(8,37,"CHALLENGER.EDIT.TITLE")),t(2),c("ngIf",l.isLocked),t(2),c("formGroup",l.form),t(5),b(" ",o(17,39,"CHALLENGER.EDIT.BASIC_DETAILS")," "),t(5),p(o(22,41,"CHALLENGER.EDIT.CHALLENGE_TITLE")),t(2),f("opacity-50",l.isLocked),t(3),p(o(27,43,"CHALLENGER.EDIT.DESCRIPTION")),t(8),b(" ",o(35,45,"CHALLENGER.EDIT.CATEGORY_SETTINGS")," "),t(4),p(o(39,47,"CHALLENGER.EDIT.SELECT_CATEGORY")),t(3),c("ngForOf",l.categories)("ngForTrackBy",l.trackByName),t(4),p(o(46,49,"CHALLENGER.EDIT.DIFFICULTY")),t(2),f("opacity-50",l.isLocked),t(2),p(o(50,51,"CHALLENGER.CREATE.DIFFICULTY_EASY")),t(3),p(o(53,53,"CHALLENGER.CREATE.DIFFICULTY_MEDIUM")),t(3),p(o(56,55,"CHALLENGER.CREATE.DIFFICULTY_HARD")),t(4),p(o(60,57,"CHALLENGER.EDIT.DURATION_DAYS")),t(2),f("opacity-50",l.isLocked),t(3),p(o(65,59,"CHALLENGER.EDIT.REQUIRED_SKILLS")),t(8),b(" ",o(73,61,"CHALLENGER.EDIT.REWARDS")," "),t(6),p(o(79,63,"CHALLENGER.EDIT.PRIZE_AMOUNT")),t(5),f("opacity-50",l.isLocked),t(3),p(o(87,65,"CHALLENGER.EDIT.OPPORTUNITY_TYPE")),t(5),f("opacity-50",l.isLocked),t(2),p(o(94,67,"CHALLENGER.EDIT.ONE_TIME_PRIZE")),t(4),f("opacity-50",l.isLocked),t(2),p(o(100,69,"CHALLENGER.EDIT.HIRING_JOB")),t(4),b(" ",o(104,71,"CHALLENGER.EDIT.CANCEL")," "),t(2),c("disabled",l.form.invalid||l.isLoading),t(),c("ngIf",l.isLoading),t(),b(" ",l.isLoading?o(108,73,"CHALLENGER.EDIT.SAVING"):o(109,75,"CHALLENGER.EDIT.SAVE_CHANGES")," "))},dependencies:[k,_,N,X,z,Z,J,F,U,W,Y,O,P,Q,K,j,q,M,G,D,H],encapsulation:2})}};export{te as EditChallengeComponent};
