<div class="space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500">
  <!-- Header & Filters -->
  <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
    <div>
      <h2 class="text-2xl font-bold mb-2 text-gray-900">
        {{ 'DASHBOARD.ADMIN.CHALLENGES.TITLE' | translate }}
      </h2>
      <p class="text-gray-600">{{ 'DASHBOARD.ADMIN.CHALLENGES.SUBTITLE' | translate }}</p>
    </div>

    <!-- Tab Buttons -->
    <div class="flex flex-wrap gap-2">
      @for(tab of tabs; track tab.label) {
      <button
        (click)="setTab(tab.value)"
        class="px-4 py-2 rounded-md transition-all font-medium text-sm"
        [ngClass]="{
          'bg-gray-900 text-white': currentTab() === tab.value,
          'bg-white border border-gray-200 text-gray-700 hover:bg-gray-50':
            currentTab() !== tab.value
        }"
      >
        {{ tab.label | translate }}
      </button>
      }
    </div>
  </div>

  <!-- Content Grid -->
  @if (loading()) {
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- Skeletons -->
    @for(i of [1,2,3,4]; track i) {
    <div class="h-64 bg-gray-100 rounded-2xl animate-pulse"></div>
    }
  </div>
  } @else { @if (filteredChallenges().length === 0) {
  <div class="p-16 text-center border border-dashed border-gray-200 rounded-2xl bg-white">
    <lucide-icon [img]="icons.Trophy" class="w-12 h-12 text-gray-300 mx-auto mb-3"></lucide-icon>
    <p class="text-gray-500 font-medium">
      {{ 'DASHBOARD.ADMIN.CHALLENGES.NO_CHALLENGES' | translate }}
    </p>
  </div>
  } @else {

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    @for (challenge of filteredChallenges(); track challenge._id) {
    <ui-card>
      <!-- Title & Status -->
      <div class="mb-4">
        <div class="flex justify-between items-start gap-4">
          <h3
            class="text-lg font-semibold text-gray-900 line-clamp-1 group-hover:text-orange-600 transition-colors"
            title="{{ challenge.title }}"
          >
            {{ challenge.title }}
          </h3>
          <!-- Status Badge -->
          <span
            class="text-[10px] uppercase font-bold px-2 py-1 rounded"
            [ngClass]="{
              'bg-green-100 text-green-700': challenge.status === 'published',
              'bg-yellow-100 text-yellow-700': challenge.status === 'draft',
              'bg-gray-100 text-gray-600': challenge.status === 'closed'
            }"
          >
            {{ challenge.status }}
          </span>
        </div>

        <div class="flex items-center gap-2 mt-1 text-sm text-gray-500">
          <span class="capitalize">{{ challenge.category }}</span>
          <span>•</span>
          <span
            class="capitalize"
            [ngClass]="{
              'text-green-600': challenge.difficulty === 'easy',
              'text-yellow-600': challenge.difficulty === 'medium',
              'text-red-600': challenge.difficulty === 'hard'
            }"
            >{{ challenge.difficulty }}</span
          >
          <span>•</span>
          <span class="text-gray-400">by {{ challenge.creatorId.name || 'Unknown' }}</span>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="grid grid-cols-3 gap-4 mb-6 flex-1">
        <!-- Participants -->
        <div
          class="bg-gray-50 rounded-xl p-4 border border-gray-100 flex flex-col justify-center text-center sm:text-left"
        >
          <div
            class="text-xs text-gray-500 mb-1 flex items-center justify-center sm:justify-start gap-1"
          >
            {{ 'DASHBOARD.GENERAL.PARTICIPANTS' | translate }}
          </div>
          <div class="text-xl font-semibold text-gray-900">
            {{ challenge.participantsCount || 0 }}
          </div>
        </div>

        <!-- Quality -->
        <div
          class="bg-gray-50 rounded-xl p-4 border border-gray-100 flex flex-col justify-center text-center sm:text-left"
        >
          <div
            class="text-xs text-gray-500 mb-1 flex items-center justify-center sm:justify-start gap-1"
          >
            {{ 'DASHBOARD.ADMIN.CHALLENGES.AVG_SCORE' | translate }}
          </div>
          <div class="text-xl font-semibold text-gray-900">{{ challenge.averageAiScore || 0 }}</div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-3 mt-auto">
        <button
          class="flex-1 px-4 py-2.5 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-all text-sm font-medium flex items-center justify-center gap-2"
        >
          <lucide-icon [img]="icons.Eye" class="w-4 h-4"></lucide-icon>
          {{ 'DASHBOARD.ADMIN.CHALLENGES.VIEW' | translate }}
        </button>
      </div>
    </ui-card>
    }
  </div>
  } }
</div>
