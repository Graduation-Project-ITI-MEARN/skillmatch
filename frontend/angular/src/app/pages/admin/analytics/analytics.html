<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
  <!-- Header -->
  <div>
    <h2 class="text-2xl font-bold mb-2 text-gray-900">
      {{ 'DASHBOARD.ADMIN.ANALYTICS.TITLE' | translate }}
    </h2>
    <p class="text-gray-600">{{ 'DASHBOARD.ADMIN.ANALYTICS.SUBTITLE' | translate }}</p>
  </div>

  @if (loading()) {
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
    @for(i of [1,2,3,4]; track i) {
    <div class="h-32 bg-gray-100 rounded-2xl animate-pulse"></div>
    }
  </div>
  } @else {
  <!-- KPI Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- 1. User Growth (Real Data) -->
    <ui-card class="border-gray-200">
      <div class="text-sm text-gray-600 mb-2 flex items-center gap-2">
        <lucide-icon [img]="icons.Users" class="w-4 h-4"></lucide-icon>
        {{ 'DASHBOARD.ADMIN.ANALYTICS.USER_GROWTH' | translate }}
      </div>
      <div class="text-3xl font-bold mb-1 text-gray-900">
        {{ data()?.userGrowth?.last30Days || 0 }}
      </div>
      <div
        class="text-xs font-medium"
        [ngClass]="userGrowthPct() >= 0 ? 'text-green-600' : 'text-red-600'"
      >
        {{ userGrowthPct() > 0 ? '+' : '' }}{{ userGrowthPct() }}%
        {{ 'DASHBOARD.ADMIN.ANALYTICS.VS_LAST_MONTH' | translate }}
      </div>
    </ui-card>

    <!-- 2. Active Users (Real Data - Engagement) -->
    <ui-card class="border-gray-200">
      <div class="text-sm text-gray-600 mb-2 flex items-center gap-2">
        <lucide-icon [img]="icons.Activity" class="w-4 h-4"></lucide-icon>
        {{ 'DASHBOARD.ADMIN.ANALYTICS.ACTIVE_USERS' | translate }}
      </div>
      <div class="text-3xl font-bold mb-1 text-gray-900">
        {{ data()?.engagementLast7Days || 0 }}
      </div>
      <div class="text-xs text-gray-500">
        {{ 'DASHBOARD.ADMIN.ANALYTICS.ACTIVE_SUBTITLE' | translate }}
      </div>
    </ui-card>

    <!-- 3. Revenue (Real Data - usually 0 based on backend) -->
    <ui-card class="border-gray-200">
      <div class="text-sm text-gray-600 mb-2 flex items-center gap-2">
        <lucide-icon [img]="icons.DollarSign" class="w-4 h-4"></lucide-icon>
        {{ 'DASHBOARD.ADMIN.ANALYTICS.REVENUE' | translate }}
      </div>
      <div class="text-3xl font-bold mb-1 text-gray-900">
        {{ data()?.revenue | currency }}
      </div>
      <div class="text-xs text-gray-500">
        {{ 'DASHBOARD.ADMIN.ANALYTICS.REVENUE_SUBTITLE' | translate }}
      </div>
    </ui-card>

    <!-- 4. Placeholder for future metric -->
    <ui-card class="border-gray-200">
      <div class="text-sm text-gray-600 mb-2 flex items-center gap-2">
        <lucide-icon [img]="icons.BarChart3" class="w-4 h-4"></lucide-icon>
        {{ 'DASHBOARD.ADMIN.ANALYTICS.CONVERSION' | translate }}
      </div>
      <div class="text-3xl font-bold mb-1 text-gray-900">--%</div>
      <div class="text-xs text-gray-500">
        {{ 'DASHBOARD.ADMIN.ANALYTICS.NO_DATA' | translate }}
      </div>
    </ui-card>
  </div>

  <!-- Charts Section (Mocked UI based on design, using CSS bars) -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Revenue Breakdown (Mock Visuals) -->
    <ui-card class="border-gray-200">
      <h3 class="text-lg font-bold mb-6 text-gray-900">
        {{ 'DASHBOARD.ADMIN.ANALYTICS.REVENUE_DISTRIBUTION' | translate }}
      </h3>
      <div class="space-y-5">
        <!-- Item 1 -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">{{
              'DASHBOARD.ADMIN.ANALYTICS.COMPANY_CHALLENGES' | translate
            }}</span>
            <span class="text-sm font-bold text-gray-900">60%</span>
          </div>
          <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
            <div class="h-full bg-primary-gradient w-[60%] rounded-full"></div>
          </div>
        </div>
        <!-- Item 2 -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">{{
              'DASHBOARD.ADMIN.ANALYTICS.PREMIUM_FEATURES' | translate
            }}</span>
            <span class="text-sm font-bold text-gray-900">30%</span>
          </div>
          <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
            <div class="h-full bg-primary-gradient w-[30%] rounded-full"></div>
          </div>
        </div>
        <!-- Item 3 -->
        <div>
          <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">{{
              'DASHBOARD.ADMIN.ANALYTICS.COMMISSIONS' | translate
            }}</span>
            <span class="text-sm font-bold text-gray-900">10%</span>
          </div>
          <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
            <div class="h-full bg-primary-gradient w-[10%] rounded-full"></div>
          </div>
        </div>
      </div>
    </ui-card>

    <!-- Engagement (Mock Visuals) -->
    <ui-card class="border-gray-200">
      <h3 class="text-lg font-bold mb-6 text-gray-900">
        {{ 'DASHBOARD.ADMIN.ANALYTICS.PLATFORM_HEALTH' | translate }}
      </h3>
      <div class="space-y-4">
        <div
          class="p-4 bg-gray-50 rounded-xl border border-gray-100 flex justify-between items-center"
        >
          <span class="text-sm text-gray-600">{{
            'DASHBOARD.ADMIN.ANALYTICS.AVG_SESSION' | translate
          }}</span>
          <span class="font-bold text-gray-900">24 min</span>
        </div>
        <div
          class="p-4 bg-gray-50 rounded-xl border border-gray-100 flex justify-between items-center"
        >
          <span class="text-sm text-gray-600">{{
            'DASHBOARD.ADMIN.ANALYTICS.CHALLENGES_PER_USER' | translate
          }}</span>
          <span class="font-bold text-gray-900">4.2</span>
        </div>
        <div
          class="p-4 bg-gray-50 rounded-xl border border-gray-100 flex justify-between items-center"
        >
          <span class="text-sm text-gray-600">{{
            'DASHBOARD.ADMIN.ANALYTICS.RETENTION' | translate
          }}</span>
          <span class="font-bold text-green-600">85%</span>
        </div>
      </div>
    </ui-card>
  </div>
  }
</div>
