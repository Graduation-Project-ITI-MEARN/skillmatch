<app-dashboard-layout titleKey="{{ name }}" subtitleKey="DASHBOARD.SUBTITLES.COMPANY" [tabs]="tabs">
  <span
    avatar
    class="shrink-0 flex items-center justify-center w-14 h-14 rounded-full bg-primary-gradient text-white font-bold"
  >
    {{ initials }}
  </span>

  <div actions class="flex items-center gap-2 sm:gap-3">
    <app-notifications-dropdown />
    <!-- Modified: routerLink removed in favor of handleCreateChallenge() click event -->
    <a
      [routerLink]="['/dashboard/company/create']"
      class="whitespace-nowrap px-3 py-2 md:px-6 md:py-2 bg-gray-900 text-white rounded-lg hover:opacity-90 transition-all font-medium text-[11px] sm:text-sm md:text-base shadow-xl"
    >
      {{ 'DASHBOARD.ACTIONS.CREATE_CHALLENGE' | translate }}
    </a>
  </div>

  <ng-container stats>
    @if(isLoading) { @for(i of [1,2,3,4]; track i) {
    <div class="bg-white rounded-lg border border-gray-200 p-6 animate-pulse">
      <div class="h-4 bg-gray-200 rounded w-1/2 mb-4"></div>
      <div class="h-8 bg-gray-200 rounded w-1/3"></div>
    </div>
    } } @else {
    <!-- Display stats only if hasStatsData is true -->
    @if (hasStatsData) { @for(stat of stats; track stat.labelKey) {
    <z-stat [labelKey]="stat.labelKey" [value]="stat.value" [trend]="stat.trend">
      <lucide-icon icon [img]="stat.icon" class="w-5 h-5 text-gray-500"></lucide-icon>
    </z-stat>
    } } }
  </ng-container>

  <router-outlet></router-outlet>
</app-dashboard-layout>
